(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,n){},118:function(e,t,n){e.exports=n(280)},271:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfaBBoAAAC1VYTSAAABiklEQVQ4y73Sv04UURTH8e+5M7C7ZndAdgETTbTTxpgIRgoLY2Ik2PoG64PwDEQLEgs6NbYWPoAVCTZWNIRAQpAF/0Ci7u7M+VnMYBbYgUrPKU5ycz+559574F+H5WVmYGntXBDlpU+deNRC6s4VvlwMbmJ1X/Rn9p0d9ymm2DsfTKNJLemhFnSVrYNOlRaT7JeDFt7ytjdU1309rl1iMz0STZoclAE11FYihJp6pAfWs82sKyaY4NtZcBlPvO2J4zgedE1P/I59Ddtp5ozz4zQYR4meFyfkOaJbeuo3bKey26PBGIeDIDkLEKppRvP9MTb8sFo0FnKQlmZ23Rf9rc39LloqQFaSTkqKz/ptL0CcF2d4CLB1luwNJ0FaNgm79tqWK+vp8dAdg2zY5iN7zwutjqR9ROcC0OOjveRD9DMiOzEiw1qSfbZle2cd4xfVgU87fUIAsG1WbGV0wwGnS3f43QJhOqyF/ehVfM+sQo1qySvY3xLpLjGf4q4B/bJXGwBFFVb6K/8n/gBIW70kwgYH3gAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNi0wOS0xN1QxNToxODoyNSswODowMCtEZsAAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTAtMDQtMjZUMDA6MDA6MDArMDg6MDCgVTtdAAAATXRFWHRzb2Z0d2FyZQBJbWFnZU1hZ2ljayA3LjAuMS02IFExNiB4ODZfNjQgMjAxNi0wOS0xNyBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ93ZpU4AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAXdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADQ4h2CHLQAAABZ0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAA0OH/PR6AAAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTI3MjIxMTIwMAkpDe8AAAASdEVYdFRodW1iOjpTaXplADUuODdLQoRSJ5sAAABbdEVYdFRodW1iOjpVUkkAZmlsZTovLy9ob21lL3d3d3Jvb3Qvc2l0ZS93d3cuZWFzeWljb24ubmV0L2Nkbi1pbWcuZWFzeWljb24uY24vc3JjLzEwOS8xMDk0Ni5wbmc6EbOHAAAAAElFTkSuQmCC"},272:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfaBBoAAAC1VYTSAAAAtklEQVQ4y92SPQrCQBCFv1lTWNtbeALxIOk9jYWexk5I6x3S2IpgYZle2OxYZP/EFSwUgq8a3s77WRgYHQRgVXhoC2wLVH6eypoFCghn3XMHQZdS+w2rBzkRBA5msmXuxVc9cgOH1rIL7gpJ0IPBxOTJMNuUT+oSBKBkZpF9QeW9CrDvBWWv/ouC31f6m09L5OSTBIeLnJ/tc4jNBA46NvG8L3SebcIGliaLN+S3N5Au6xigjBIPRFJDfNYyswsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTYtMDktMTdUMTU6MjI6MjQrMDg6MDAD85u8AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDEwLTA0LTI2VDAwOjAwOjAwKzA4OjAwoFU7XQAAAE10RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNy4wLjEtNiBRMTYgeDg2XzY0IDIwMTYtMDktMTcgaHR0cDovL3d3dy5pbWFnZW1hZ2ljay5vcmfd2aVOAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAF3RFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAA0OIdghy0AAAAWdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANDh/z0egAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADEyNzIyMTEyMDAJKQ3vAAAAEnRFWHRUaHVtYjo6U2l6ZQA1LjQ5S0LEGrUpAAAAW3RFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vaG9tZS93d3dyb290L3NpdGUvd3d3LmVhc3lpY29uLm5ldC9jZG4taW1nLmVhc3lpY29uLmNuL3NyYy8xMjIvMTIyMDUucG5naRjBHQAAAABJRU5ErkJggg=="},280:function(e,t,n){"use strict";n.r(t);var a=n(17),i=n(68),o=n(1),s=n(2),l=n(4),r=n(3),c=n(5),u=n(0),d=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.createElement("div",{id:"map"})}},{key:"componentDidMount",value:function(){var e=window.BMap,t=new e.Map("map");window.map=t;var n=new e.Point(114.3576,30.5289);t.centerAndZoom(n,13),t.enableScrollWheelZoom(!0),t.addControl(new e.NavigationControl),t.addControl(new e.ScaleControl),t.addControl(new e.OverviewMapControl),t.addControl(new e.MapTypeControl),t.setCurrentCity("\u5927\u5b66");var a=new e.LocalSearch(t,{renderOptions:{map:t,panel:"results"},onInfoHtmlSet:this.onInfoHtmlSet.bind(this)});window.localSearch=a}},{key:"onInfoHtmlSet",value:function(e,t){var n=this;console.log(e);var a=e.title,i=e.point,o=t.parentNode.parentNode,s=o.querySelector("a");s&&s.remove();var l=function(){n.addNode(a,i)};if(o.querySelectorAll("button").length<=0){var r=document.createElement("button"),c=document.createTextNode("Add");return r.className="add",r.id="addCity",r.appendChild(c),r.onclick=l,void o.appendChild(r)}o.querySelector("button").onclick=l}},{key:"addNode",value:function(e,t){console.log("\u6dfb\u52a0\uff1a"+e+t);var n={name:e,lng:t.lng,lat:t.lat},a=this.props.node;a.findIndex(function(e){return e.name===n.name})<0&&(a.push(n),this.props.updateState(a))}}]),t}(u.Component),p=n(77),h=n.n(p),m=n(115),f=function(e){if(!document.querySelector("#"+e)){var t=document.createElement("div");t.id=e,t.className="mymenu",document.body.appendChild(t)}this.menu=document.querySelector("#"+e),this.menu.innerHTML=""};f.prototype.append=function(e){var t=this;e.forEach(function(e){var n=document.createElement("div");n.className="myitem",n.innerHTML=e.label,n.addEventListener("click",function(){return e.click(),t.menu.style.display="none",!1},!0),t.menu.appendChild(n)})},f.prototype.popup=function(e,t){this.menu.style.display="block",this.menu.style.top=t+"px",this.menu.style.left=e+"px"},document.body.addEventListener("click",function(){document.querySelectorAll(".mymenu").forEach(function(e){return e.style.display="none"})},!0);var v=f,y=window.jQuery,A=n(0);window.algo="DFS",window.algos||(window.algos=["DFS","dijkstra"]);var E=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).MARGIN_LEFT=150,n.RIGHT=10,n.state={right:0,marginLeft:0,search:""},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.node.map(function(t){var n=t.name;return A.createElement("p",{key:n,onClick:e.nodeClick.bind(e),onContextMenu:e.ndoeMenuClick.bind(e)},n)}),n=window.algos.map(function(e,t){return A.createElement("option",{key:"algo_"+e,value:e},e+" Algo")});return A.createElement("div",{id:"sidebar",style:{marginLeft:this.state.marginLeft+"px"}},A.createElement("div",{id:"search"},A.createElement("input",{type:"text",id:"input",value:this.state.search,onChange:this.inputChange.bind(this)}),A.createElement("button",{id:"searchOK",onClick:this.searchClick.bind(this)},"Query")),A.createElement("div",{id:"nodeList"},t),A.createElement("div",{id:"algos"},A.createElement("select",{onChange:this.handleSelect.bind(this)},n)),A.createElement("div",{id:"confirm"},A.createElement("button",{id:"confirmBtn",onClick:this.confirmClick.bind(this)},"Confirm")),A.createElement("div",{id:"reports"},A.createElement(a.b,{id:"mlink",to:"reports"},A.createElement("button",{onClick:function(){}},"Reports"))),A.createElement("div",{id:"info"},A.createElement("button",null,"Exit")),A.createElement("div",{className:"drawer",style:{right:this.state.right+"px"},onClick:this.close.bind(this)}))}},{key:"handleSelect",value:function(e){console.log(e.target.value),window.algo=e.target.value,Object.is(window.algo,"dijkstra")&&(window.showDis=!0)}},{key:"close",value:function(){0!==this.state.right?this.setState({right:0,marginLeft:0}):this.setState({right:-this.RIGHT,marginLeft:-this.MARGIN_LEFT})}},{key:"inputChange",value:function(e){this.setState({search:e.target.value})}},{key:"searchClick",value:function(){window.map.clearOverlays();var e=y("#input").val();window.localSearch.search(e)}},{key:"nodeClick",value:function(){}},{key:"ndoeMenuClick",value:function(e){e.preventDefault();var t=e.target.innerText,n=this,a=new v("MyMenu_Node");return a.append([{label:"Remove",click:function(){var e=n.props.node,a=e.findIndex(function(e){return e.name===t});a<0||(e.splice(a,1),n.props.updateState(e))}}]),a.popup(e.clientX,e.clientY),!1}},{key:"confirmClick",value:function(e){var t=this;window.map.clearOverlays(),window.layer.load(1,{shade:[.2,"#fff"]}),this.props.link.splice(0),this.loadLinks(),setTimeout(function(){return t.autoViewport()},600)}},{key:"loadLinks",value:function(){var e=this;function t(){return(t=Object(m.a)(h.a.mark(function t(){var n,a,i,o,s,l;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=Array.from(e.props.node),a=0;case 2:if(!(a<n.length)){t.next=18;break}i=n[a],o=a+1;case 5:if(!(o<n.length)){t.next=15;break}return s=n[o],console.log(i.name+"---\x3e"+s.name),t.next=10,e.loadLink(i,s);case 10:l=t.sent,e.onSearchComplete(l);case 12:o++,t.next=5;break;case 15:a++,t.next=2;break;case 18:case"end":return t.stop()}},t)}))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().then(function(){window.repaint||window.layer.closeAll()}).catch(function(e){layer.closeAll(),console.log(e),alert(e)})}},{key:"loadLink",value:function(e,t){var n=window.BMap,a=new n.Point(e.lng,e.lat),i=new n.Point(t.lng,t.lat);return new Promise(function(o,s){new n.DrivingRoute(window.map,{renderOptions:{map:null,autoViewport:!1},onSearchComplete:function(n){o({results:n,node1:e,node2:t})}}).search(a,i)})}},{key:"searchRoute",value:function(e,t){}},{key:"onSearchComplete",value:function(e){var t=e.results,n=e.node1,a=e.node2,i=t.getPlan(0),o=i.getDistance(!0),s=i.getRoute(0).getPath(),l=new window.BMap.Polyline(s);window.map.addOverlay(l),this.setLink(n,a,o,l)}},{key:"setLink",value:function(e,t,n,a){var i=this.props.link;i.push({node1:e,node2:t,dis:n,polyline:a}),this.props.updateState(null,i)}},{key:"autoViewport",value:function(){var e=this.props.node,t=[];e.forEach(function(e){var n=window.BMap,a=new n.Point(e.lng,e.lat);t.push(a);var i=new n.Marker(a,{title:e.name}),o=new n.Label(e.name,{offset:new n.Size(20,-10)});i.setLabel(o),window.map.addOverlay(i)});var n=window.map.getViewport(t);window.map.centerAndZoom(n.center,n.zoom)}}]),t}(A.Component),b=n(12),g={onObj:{},oneObj:{},on:function(e,t){void 0===this.onObj[e]&&(this.onObj[e]=[]),this.onObj[e].push(t)},one:function(e,t){void 0===this.oneObj[e]&&(this.oneObj[e]=[]),this.oneObj[e].push(t)},off:function(e){this.onObj[e]=[],this.oneObj[e]=[]},trigger:function(){var e,t;if(0==arguments.length)return!1;if(e=arguments[0],t=[].concat(Array.prototype.slice.call(arguments,1)),void 0!==this.onObj[e]&&this.onObj[e].length>0)for(var n in this.onObj[e])this.onObj[e][n].apply(null,t);if(void 0!==this.oneObj[e]&&this.oneObj[e].length>0){for(var a in this.oneObj[e])this.oneObj[e][a].apply(null,t),this.oneObj[e][a]=void 0;this.oneObj[e]=[]}}},w=n(0),O=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).state={tab:1,code:"",actions:[]},n.SELECTED_LINK_COLOR="#ff0000",n.DEFAULT_LINK_COLOR="#3a6bdb",n.onShowCode=n.onShowCode.bind(Object(b.a)(Object(b.a)(n))),n.onShowAction=n.onShowAction.bind(Object(b.a)(Object(b.a)(n))),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.setContent(this.props);return w.createElement("div",{style:{width:"100%",height:"100%"}},w.createElement("div",{id:"tab"},w.createElement("div",{style:{backgroundColor:1===this.state.tab?"#999":"#CCC"},onClick:this.setPTab.bind(this)},"Vertex"),w.createElement("div",{style:{backgroundColor:2===this.state.tab?"#999":"#CCC"},id:"edge",onClick:this.setLTab.bind(this)},"Edge"),w.createElement("div",{style:{backgroundColor:3===this.state.tab?"#999":"#CCC"},onClick:this.setMatrixTab.bind(this)},"Matrix"),w.createElement("div",{style:{backgroundColor:4===this.state.tab?"#999":"#CCC"},onClick:this.setCodeTab.bind(this)},"Codes"),w.createElement("div",{style:{backgroundColor:5===this.state.tab?"#999":"#CCC"},onClick:this.setActionTab.bind(this)},"Steps")),w.createElement("div",{id:"tabContent"},e))}},{key:"onShowCode",value:function(e){this.setState({code:e})}},{key:"onShowAction",value:function(e){this.setState({actions:e})}},{key:"componentDidMount",value:function(){g.on(window.showCode,this.onShowCode),g.on(window.showAction,this.onShowAction)}},{key:"setPTab",value:function(){this.setState({tab:1})}},{key:"setLTab",value:function(){this.setState({tab:2})}},{key:"setMatrixTab",value:function(){this.setState({tab:3})}},{key:"setCodeTab",value:function(){this.setState({tab:4})}},{key:"setActionTab",value:function(){this.setState({tab:5})}},{key:"setContent",value:function(e){var t=e.node,n=e.link;switch(this.state.tab){case 1:return this.renderPoint(t);case 2:return this.renderLink(n);case 3:return this.renderMatrix(t,n);case 4:return this.renderCode();case 5:return this.renderAction()}return"ERROR"}},{key:"renderPoint",value:function(e){var t=e.map(function(e){return w.createElement("tr",{key:e.name},w.createElement("td",null,e.name),w.createElement("td",null,e.lng),w.createElement("td",null,e.lat))});return w.createElement("table",null,w.createElement("thead",null,w.createElement("tr",null,w.createElement("th",null,"VertexName"),w.createElement("th",null,"Longitude"),w.createElement("th",null,"Latitude"))),w.createElement("tbody",null,t))}},{key:"renderLink",value:function(e){var t=this,n=e.map(function(e,n){var a=e.polyline.isVisible(),i=e.polyline.getStrokeColor()===t.SELECTED_LINK_COLOR;return w.createElement("tr",{key:e+"-"+n,onClick:t.highlightLink(e).bind(t),style:{backgroundColor:i?"#DDD":"#FFF"}},w.createElement("td",null,e.node1.name+" -> "+e.node2.name),w.createElement("td",null,e.dis),w.createElement("td",{id:"link_"+n,onClick:t.setLink(e).bind(t)},a?"Yes":"No"))});return w.createElement("table",null,w.createElement("thead",null,w.createElement("tr",null,w.createElement("th",null,"Route"),w.createElement("th",null,"Distance"),w.createElement("th",null,"Select (Y/N)"))),w.createElement("tbody",null,n))}},{key:"renderMatrix",value:function(e,t){var n=w.createElement("th",null),a=e.map(function(e){return w.createElement("th",null,e.name)}),i=e.map(function(n){var a=w.createElement("th",null,n.name),i=n.name,o=e.map(function(e){for(var n,a=0,o=0;o<t.length;o++)(t[o].polyline.isVisible()&&i==t[o].node1.name&&e.name==t[o].node2.name||i==t[o].node2.name&&e.name==t[o].node1.name)&&(n=t[o].dis,a=1);return 1==a?w.createElement("td",{align:"center"},n):w.createElement("td",{align:"center"},"\u221e")});return w.createElement("tr",null,a,o)});return w.createElement("table",null,n,a,i)}},{key:"renderCode",value:function(){return w.createElement("textarea",{cols:"80",rows:"30",value:this.state.code,autoFocus:!0,readOnly:!0})}},{key:"renderAction",value:function(){var e=this.state.actions;console.log(e);var t=e.map(function(e,t){return w.createElement("tr",{key:t},w.createElement("td",{align:"center"},e))});return w.createElement("table",null,t)}},{key:"highlightLink",value:function(e){return function(t){var n=this,a=this.props.link;a.forEach(function(e){e.polyline.setStrokeColor(n.DEFAULT_LINK_COLOR)}),e.polyline.setStrokeColor(this.SELECTED_LINK_COLOR),this.props.updateState(null,a)}}},{key:"setLink",value:function(e){return function(t){var n=this.props.link;e.polyline.isVisible()?e.polyline.hide():e.polyline.show(),this.props.updateState(null,n)}}}]),t}(w.Component),k=n(46),C=n(69);n(13);n(271),n(272);var S=n(0),I=window.jQuery,D=null,j=[],N={},L=1;window.question=!1;var _,T=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).state={},n.DEFAULT_LINK_COLOR="#3a6bdb",n.INITIAL_LINK_COLOR="#0a0a0a",n.INITIAL_NODE_COLOR="#5B9BD5",n.SELECTED_LINK_COLOR="#ff4444",n.SELECTED_NODE_COLOR="#ff4444",n.state.speed=.5,n.state.play="stop",n.state.start="",n.state.end="",n.state.S_NODE=new Map,n.state.S_EDGE=new Map,n.state.question=!1,n.state.S_NODE_DIS=new Map,n.state.S_NODE_INFO=new Map,n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){this.clcMaxMin();var e=this.renderNode(),t=this.renderLink(),n="play"===this.state.play?"pauseState":"playState";return S.createElement("div",{id:"graphWrap"},S.createElement("div",{id:"main"},S.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#FFF"}},S.createElement("svg",{ref:"graph",width:"100%",height:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg",onContextMenu:function(e){e.preventDefault()}},t,e))),S.createElement("div",{id:"tool"},S.createElement("div",{id:"question"}," Quiz ",S.createElement("input",{id:"question_checkbox",type:"checkbox",checked:this.state.question,onChange:this.checkChange.bind(this)})," "),S.createElement("div",{id:"speed",title:"\u901f\u5ea6",onClick:this.changeSpeed.bind(this)},S.createElement("div",{id:"speedValue",style:{width:100*this.state.speed+"%"}})),S.createElement("div",{id:"prev",title:"\u4e0a\u4e00\u6b65",onClick:this.animate_back.bind(this)}),S.createElement("div",{id:"start",title:"\u5f00\u59cb/\u6682\u505c",className:n,onClick:this.play.bind(this)}),S.createElement("div",{id:"next",title:"\u4e0b\u4e00\u6b65",onClick:this.animate_forward.bind(this)}),S.createElement("div",{id:"end",title:"\u7ed3\u675f",onClick:this.stop.bind(this)}),S.createElement("div",{id:"reset",title:"\u590d\u4f4d",onClick:this.reSet.bind(this)})))}},{key:"reSet",value:function(){D=null,j=[],N={},L=1,window.question=!1,this.resetColor(),this.state.speed=.5,this.state.play="stop",this.state.start="",this.state.end="",this.state.S_NODE=new Map,this.state.S_EDGE=new Map,this.state.question=!1,this.state.S_NODE_DIS=new Map,this.state.S_NODE_INFO=new Map}},{key:"checkChange",value:function(e){window.question=e.target.checked,console.log(window.question),this.setState({question:!this.state.question})}},{key:"clcMaxMin",value:function(){var e=this,t=-1/0,n=1/0,a=-1/0,i=1/0;this.mid_lng=0,this.mid_lat=0,this.props.node.forEach(function(o){o.lat>a&&(a=o.lat),o.lat<i&&(i=o.lat),o.lng>t&&(t=o.lng),o.lng<n&&(n=o.lng),e.mid_lng+=o.lng,e.mid_lat+=o.lat}),this.max_lng=t,this.min_lng=n,this.max_lat=a,this.min_lat=i,this.mid_lng/=this.props.node.length,this.mid_lat/=this.props.node.length}},{key:"clcCoordinate",value:function(e,t){var n=this.refs.graph.clientWidth,a=this.refs.graph.clientHeight;return[n=(n-50-50)/(this.max_lng-this.min_lng+.001)*(e-this.min_lng)+50,a-=(a-50-50)/(this.max_lat-this.min_lat+.001)*(t-this.min_lat)+50]}},{key:"renderNode",value:function(){var e=this;return this.props.node.map(function(t){var n=e.clcCoordinate(t.lng,t.lat),a=Object(C.a)(n,2),i=a[0],o=a[1],s=t.name,l=e.setSE.bind(e),r=null,c="",u="";e.state.start===t.name&&(r="#CCFFFF"),e.state.end===t.name&&(r="#CC6699"),e.state.S_NODE.has(t.name)&&(r=e.state.S_NODE.get(t.name)),e.state.S_NODE_DIS.has(t.name)&&(c=e.state.S_NODE_DIS.get(t.name)),e.state.S_NODE_INFO.has(t.name)&&(u=e.state.S_NODE_INFO.get(t.name));var d={name:s,x:i,y:o,setSE:l,color:r,distance:c,info:u};return S.createElement(R,Object.assign({key:"node"+t.name},d))})}},{key:"renderLink",value:function(){var e=this;return this.props.link.map(function(t){if(t.polyline.isVisible()){var n=e.clcCoordinate(t.node1.lng,t.node1.lat),a=Object(C.a)(n,2),i=a[0],o=a[1],s=e.clcCoordinate(t.node2.lng,t.node2.lat),l=Object(C.a)(s,2),r=l[0],c=l[1],u={name:t.node1.name,x:i,y:o},d={name:t.node2.name,x:r,y:c},p=t.polyline.getStrokeColor(),h="",m=!0,f=!1,v=void 0;try{for(var y,A=e.state.S_EDGE[Symbol.iterator]();!(m=(y=A.next()).done);m=!0){var E=y.value;if(t.node1.name===E[1][0]&&t.node2.name===E[1][1]||t.node1.name===E[1][1]&&t.node2.name===E[1][0]){h=E[0];break}}}catch(b){f=!0,v=b}finally{try{m||null==A.return||A.return()}finally{if(f)throw v}}return console.log(p,t),S.createElement(x,{key:"link-"+u.name+"-"+d.name,from:u.name,to:d.name,x1:u.x,y1:u.y,x2:d.x,y2:d.y,color:p,distance:h})}})}},{key:"changeSpeed",value:function(e){var t=(e.clientX-this.getLeft(e.target))/e.target.clientWidth;console.log(t),this.setState({speed:t})}},{key:"play",value:function(e){"stop"===this.state.play?(this.setState({play:"play"}),clearTimeout(window.timer),this.go()):"pause"===this.state.play?(this.setState({play:"play"}),this.animate()):"play"===this.state.play&&(this.setState({play:"pause"}),clearTimeout(window.timer))}},{key:"stop",value:function(){clearTimeout(window.timer),N.STEP_COUNT=1,this.setState({play:"stop",start:"",end:""}),layer.msg("Results")}},{key:"codeChangeHandler",value:function(e){g.trigger(window.showCode,e)}},{key:"actionGetHandler",value:function(e){g.trigger(window.showAction,e)}},{key:"go",value:function(){var e=this;if(!this.state.start||!this.state.end)return this.setState({play:"stop"}),this.stop();var t=this,n=[],a=[],i=[];j=[];var o="";this.props.node.forEach(function(e){j.push(e.name),o=o+e.name+" ";var t=parseInt(e.lng),n=parseInt(e.lat),i="*"+(j.length-1)+"*";a.push([i,t,n])}),a=JSON.stringify(a);var s="*"+j.findIndex(function(t){return t===e.state.start})+"*",l="*"+j.findIndex(function(t){return t===e.state.end})+"*";i.push([a.length]),i.push([-1e3,1e3]),i.push([1e3,-1e3]),i=JSON.stringify(i),t.resetColor();var r=new Map,c=new Map,u=new Map,d=new Map;this.setState({S_NODE:r,S_EDGE:c,S_NODE_DIS:u,S_NODE_INFO:d});var p="";this.props.link.forEach(function(e,t){if(e.polyline.isVisible()){var a="*"+j.findIndex(function(t){return t===e.node1.name})+"*",i="*"+j.findIndex(function(t){return t===e.node2.name})+"*";n.push([a,i,parseFloat(e.dis,10)])}else p=p+String(t)+" "}),n=JSON.stringify(n),window.layer.load(1,{shade:[.4,"#fff"]}),I.ajax({type:"POST",url:"http://localhost:3001/data",data:{edgeIn:n,pointIn:a,globalIn:i,sName:s,eName:l,algo:window.algo,placesName:o,unvisiableID:p,repaint:window.repaint},success:function(e){window.repaint&&(window.repaint=null),D=e,layer.closeAll();for(var n=[],a=0;a<D.steps.length-1;a++){var i=D.steps[a].split("\t")[3];i in N?N[i].push(a):(N[i]=[],N[i].push(a)),n.push(D.steps[a].split("\t")[1])}t.actionGetHandler(n),t.animate()},error:function(){layer.closeAll(),layer.msg("\u51fa\u9519, \u63d0\u4ea4\u5931\u8d25")}})}},{key:"animate",value:function(){var e=this;window.timer=setTimeout(function(){var t=e.getStep(L);if(layer.closeAll(),L++,null!==t){for(var n=e.props.link,a=e.state.S_NODE,i=e.state.S_EDGE,o=e.state.S_NODE_DIS,s=e.state.S_NODE_INFO,l=0;l<t.types.length;l++)if("changeEdgeColor"===t.types[l])!function(){var a=t.infos[l][1].split("(")[1].split(",");a.pop();var i=t.infos[l][1].split("RGB")[1];i=e.chooseColor(i);var o=j[parseInt(a[0])],s=j[parseInt(a[1])];n.forEach(function(e){e.polyline.isVisible()&&(e.node1.name===o&&e.node2.name===s||e.node1.name===s&&e.node2.name===o)&&e.polyline.setStrokeColor(i)})}();else if("changeNodeColor"===t.types[l]){var r=t.infos[l][1].split("(")[1].split(",")[0];r=parseInt(r);var c=t.infos[l][1].split("RGB")[1];c=e.chooseColor(c);var u=j[r];a.set(u,c)}else if("changeEdgeLength"===t.types[l]){var d=t.infos[l][1].split("(")[1].split(")")[0].split(","),p=j[parseInt(d[0])],h=j[parseInt(d[1])],m=parseFloat(d[2]);i.set(m,[p,h])}else if("changeNodeDist"===t.types[l]){d=t.infos[l][1].split("(")[1].split(")")[0].split(",");var f=parseInt(d[0]),v=parseFloat(d[1]),y=j[f];o.set(y,v)}else if("showCode"===t.types[l]){var A=e,E="code"+t.infos[l][1].split("(")[1].split(")")[0]+".txt";I.ajax({type:"POST",url:"http://localhost:3001/code",data:{codeName:E},success:function(e){A.codeChangeHandler(e)},error:function(){console.log("\u83b7\u53d6\u4ee3\u7801\u5931\u8d25\uff01")}})}else if("showHelp"===t.types[l]){var b=t.infos[l][1].split("(")[1].split(")")[0];layer.msg(b,{time:3e3*e.state.speed+70})}else{if("Question"===t.types[l]&&window.question){var g=t.infos[l][0],w=t.infos[l][1].split("(")[1].split(",")[0],O=t.infos[l][1].split("(")[1].split(",")[1];"*"===O[0]&&(O=(O=O.replace(/\*/g,"")).replace(O[0],j[O[0]]));var k=t.infos[l][1].split("(")[1].split(",")[2];if("*"===k[0])return k=k.replace(/\*/g,""),k=j[k],e.ask(O,k,w,g);if(Object.is(window.algo,"dijkstra"))return e.ask(O,k,w,g);for(var C=parseInt(k),S=[],D=k.length;D>=1;)S.push(C%10),C=parseInt(C/10),D--;for(var N=void 0,_=S.length-1;_>=0;_--)_==S.length-1?N=j[S[_]]+"->":0==_?N+=j[S[_]]:N=N+j[S[_]]+"->";return e.ask(O,N,w,g)}if("showInequality"===t.types[l]){d=t.infos[l][1].split("(")[1].split(")")[0].split(",");var T=parseInt(d[0]),R=d[1],x=j[T];s.set(x,R)}else if("InequalityDisapper"===t.types[l]){d=t.infos[l][1].split("(")[1].split(")")[0].split(",");var M=parseInt(d[0]),F=j[M];s.set(F,"")}}e.props.updateState(null,n),e.setState({S_NODE:a,S_EDGE:i,S_NODE_DIS:o,S_NODE_INFO:s}),e.animate()}else e.stop()},3e3*this.state.speed+70)}},{key:"getStep",value:function(e){console.log("get step:"+e);var t=new Array,n=new Array;if(e in N){for(var a=0;a<N[e].length;a++){var i=D.steps[N[e][a]].split("\t"),o=i[1].split("(")[0];t.push(o),n.push(i)}return{types:t,infos:n}}return null}},{key:"chooseColor",value:function(e){switch(e){case"(10,10,10))":return this.INITIAL_LINK_COLOR;case"(91,155,213))":return this.INITIAL_NODE_COLOR;case"(255,0,0))":return this.SELECTED_LINK_COLOR;default:return"#222222"}}},{key:"checkLink",value:function(e,t,n){var a=e.node1,i=e.node2;return a.name===t&&i.name===n||a.name===n&&i.name===t}},{key:"resetColor",value:function(){var e=this,t=this.props.link;t.forEach(function(t){t.polyline.isVisible()&&t.polyline.setStrokeColor(e.DEFAULT_LINK_COLOR)}),this.props.updateState(null,t)}},{key:"getLeft",value:function(e){var t=e.offsetLeft;return null!=e.offsetParent&&(t+=this.getLeft(e.offsetParent)),t}},{key:"setSE",value:function(e){e.preventDefault(),e.stopPropagation();var t=this,n=e.target.attributes.id.value.split("_").pop(),a=new v("MyMenu_Node_SVG");return a.append([{label:"Origin",click:function(){t.setState({start:n})}},{label:"Destination",click:function(){t.setState({end:n})}}]),a.popup(e.clientX,e.clientY),!1}},{key:"ask",value:function(e,t,n,a){clearTimeout(window.timer);var i=this;window.layer.prompt({title:e},function(o,s){layer.closeAll();var l=-1;window.repaint||I.ajax({type:"GET",url:"http://localhost:3001/getVisitID",data:{},success:function(i){l=parseInt(i.visitID),I.ajax({type:"POST",url:"http://localhost:3001/collectQue",data:{que:e,ans:o,msg:t,type:n,visitID:l,actionID:a},success:function(e){},error:function(){}})},error:function(){}}),o!=t?(window.layer.msg("Oops, incorrect. Answer should be: "+t,{time:1e3}),setTimeout(function(){i.animate()},1100)):(window.layer.msg("Correct!",{time:1e3}),i.animate())})}},{key:"animate_back",value:function(){var e=this;this.setState({play:"pause"}),clearTimeout(window.timer),layer.closeAll(),L--;var t=this.getStep(L);if(null!==t){for(var n=this.props.link,a=this.state.S_NODE,i=this.state.S_EDGE,o=this.state.S_NODE_DIS,s=this.state.S_NODE_INFO,l=0;l<t.types.length;l++)if(console.log(t.infos[l]),"changeEdgeColor"===t.types[l])!function(){var a=t.infos[l][1].split("(")[1].split(",");a.pop();var i=e.INITIAL_LINK_COLOR,o=j[parseInt(a[0])],s=j[parseInt(a[1])];n.forEach(function(e){e.polyline.isVisible()&&(e.node1.name===o&&e.node2.name===s||e.node1.name===s&&e.node2.name===o)&&e.polyline.setStrokeColor(i)})}();else if("changeNodeColor"===t.types[l]){var r=t.infos[l][1].split("(")[1].split(",")[0];r=parseInt(r);var c=this.INITIAL_NODE_COLOR,u=j[r];a.set(u,c)}else if("changeEdgeLength"===t.types[l]){var d=t.infos[l][1].split("(")[1].split(")")[0].split(","),p=j[parseInt(d[0])],h=j[parseInt(d[1])],m=parseFloat(d[2]);i.set(m,[p,h])}else if("changeNodeDist"===t.types[l]){d=t.infos[l][1].split("(")[1].split(")")[0].split(",");var f=parseInt(d[0]),v=parseFloat(d[1]),y=j[f];o.set(y,v)}else if("showCode"===t.types[l]){var A=this,E="code"+t.infos[l][1].split("(")[1].split(")")[0]+".txt";I.ajax({type:"POST",url:"http://localhost:3001/code",data:{codeName:E},success:function(e){A.codeChangeHandler(e)},error:function(){console.log("\u83b7\u53d6\u4ee3\u7801\u5931\u8d25\uff01")}})}else if("showHelp"===t.types[l]){var b=t.infos[l][1].split("(")[1].split(")")[0];layer.msg(b,{time:3e6*this.state.speed+70})}else{if("Question"===t.types[l]&&window.question){var g=t.infos[l][2],w=t.infos[l][3];return"*"===w[0]&&(w=w.replace(/\*/g,""),w=j[w]),this.ask(g,w)}if("showInequality"===t.types[l]){d=t.infos[l][1].split("(")[1].split(")")[0].split(",");var O=parseInt(d[0]),k=d[1],C=j[O];s.set(C,k)}else if("InequalityDisapper"===t.types[l]){d=t.infos[l][1].split("(")[1].split(")")[0].split(",");var S=parseInt(d[0]),D=j[S];s.set(D,"")}}this.props.updateState(null,n),this.setState({S_NODE:a,S_EDGE:i,S_NODE_DIS:o,S_NODE_INFO:s})}else this.stop()}},{key:"animate_forward",value:function(){var e=this;this.setState({play:"pause"}),clearTimeout(window.timer),layer.closeAll(),L++;var t=this.getStep(L);if(null!==t){for(var n=this.props.link,a=this.state.S_NODE,i=this.state.S_EDGE,o=this.state.S_NODE_DIS,s=this.state.S_NODE_INFO,l=0;l<t.types.length;l++)if("changeEdgeColor"===t.types[l])!function(){var a=t.infos[l][1].split("(")[1].split(",");a.pop();var i=t.infos[l][1].split("RGB")[1];i=e.chooseColor(i);var o=j[parseInt(a[0])],s=j[parseInt(a[1])];n.forEach(function(e){e.polyline.isVisible()&&(e.node1.name===o&&e.node2.name===s||e.node1.name===s&&e.node2.name===o)&&e.polyline.setStrokeColor(i)})}();else if("changeNodeColor"===t.types[l]){var r=t.infos[l][1].split("(")[1].split(",")[0];r=parseInt(r);var c=t.infos[l][1].split("RGB")[1];c=this.chooseColor(c);var u=j[r];a.set(u,c)}else if("changeEdgeLength"===t.types[l]){var d=t.infos[l][1].split("(")[1].split(")")[0].split(","),p=j[parseInt(d[0])],h=j[parseInt(d[1])],m=parseFloat(d[2]);i.set(m,[p,h])}else if("changeNodeDist"===t.types[l]){d=t.infos[l][1].split("(")[1].split(")")[0].split(",");var f=parseInt(d[0]),v=parseFloat(d[1]),y=j[f];o.set(y,v)}else if("showCode"===t.types[l]){var A=this,E="code"+t.infos[l][1].split("(")[1].split(")")[0]+".txt";I.ajax({type:"POST",url:"http://localhost:3001/code",data:{codeName:E},success:function(e){A.codeChangeHandler(e)},error:function(){console.log("\u83b7\u53d6\u4ee3\u7801\u5931\u8d25\uff01")}})}else if("showHelp"===t.types[l]){var b=t.infos[l][1].split("(")[1].split(")")[0];layer.msg(b,{time:3e5*this.state.speed+70})}else{if("Question"===t.types[l]&&window.question){var g=t.infos[l][2],w=t.infos[l][3];return"*"===w[0]&&(w=w.replace(/\*/g,""),w=j[w]),this.ask(g,w)}if("showInequality"===t.types[l]){d=t.infos[l][1].split("(")[1].split(")")[0].split(",");var O=parseInt(d[0]),k=d[1],C=j[O];s.set(C,k)}else if("InequalityDisapper"===t.types[l]){d=t.infos[l][1].split("(")[1].split(")")[0].split(",");var S=parseInt(d[0]),D=j[S];s.set(D,"")}}this.props.updateState(null,n),this.setState({S_NODE:a,S_EDGE:i,S_NODE_DIS:o,S_NODE_INFO:s})}else this.stop()}}]),t}(S.Component),R=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).SELECT_COLOR="#300",n.DEFAULT_COLOR="#3C9",n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return S.createElement("g",{id:"node_"+this.props.name,onContextMenu:this.props.setSE},S.createElement("circle",{id:"node_circle_"+this.props.name,cx:this.props.x,cy:this.props.y,r:this.props.r||27,fill:this.props.color||this.DEFAULT_COLOR}),S.createElement("text",Object(k.a)({id:"node_text_"+this.props.name,x:this.props.x,y:this.props.y,fill:"black",textAnchor:"middle",dominantBaseline:"middle",fontSize:"14px"},"fill","black"),this.props.hide||this.props.name),S.createElement("text",Object(k.a)({id:"node_value"+this.props.name,x:this.props.x,y:this.props.y+15,fill:"black",textAnchor:"middle",dominantBaseline:"middle",fontSize:"14px"},"fill","blue"),this.props.distance),S.createElement("text",Object(k.a)({id:"node_value"+this.props.name,x:this.props.x+40,y:this.props.y-29,fill:"black",textAnchor:"middle",dominantBaseline:"middle",fontSize:"14px"},"fill","black"),this.props.info))}},{key:"hover",value:function(e){console.log(e.target.attributes.fill),console.log(e.target.attributes);e.target.attributes}}]),t}(S.Component),x=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).SELECT_COLOR="#900",n.DEFAULT_COLOR=n.props.color,n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.DEFAULT_COLOR=this.props.color,S.createElement("g",{id:"link_"+this.props.from+"_"+this.props.to},S.createElement("line",{x1:this.props.x1,y1:this.props.y1,x2:this.props.x2,y2:this.props.y2,stroke:this.props.color,strokeWidth:"5",style:{cursor:"pointer"},onMouseEnter:this.hover.bind(this),onMouseLeave:this.hover.bind(this)}),S.createElement("text",{x:(this.props.x1+this.props.x2)/2-9,y:(this.props.y1+this.props.y2)/2-9,fontSize:"15px",fill:"blue"},this.props.distance))}},{key:"hover",value:function(e){var t=e.target.attributes;t.stroke.value===this.SELECT_COLOR?t.stroke.value=this.DEFAULT_COLOR:t.stroke.value=this.SELECT_COLOR}}]),t}(S.Component),M=T,F=n(0),V=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).MARGIN_RIGHT=600,n.LEFT=10,n.state={left:-n.LEFT,marginRight:-n.MARGIN_RIGHT},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return F.createElement("div",{id:"panel",style:{marginRight:this.state.marginRight+"px"}},F.createElement("div",{id:"graph"},F.createElement(M,this.props)),F.createElement("div",{id:"table"},F.createElement(O,this.props)),F.createElement("div",{className:"drawer",style:{left:this.state.left+"px"},onClick:this.close.bind(this)}))}},{key:"close",value:function(){0!==this.state.left?this.setState({left:0,marginRight:0}):this.setState({left:-this.LEFT,marginRight:-this.MARGIN_RIGHT})}}]),t}(F.Component),B=window.jQuery,G=(n(273),[]),Q=[];function W(e,t,n){setTimeout(function(){B("#input").val(e)},3e3*t-2800),setTimeout(function(){B("#searchOK").click()},3e3*t-2e3),setTimeout(function(){var e=B("#addCity");e.length>0?e.click():alert("\u5c1a\u672a\u52a0\u8f7d\u6dfb\u52a0\u57ce\u5e02\u7684\u7ec4\u4ef6"),t==n&&(B("#confirmBtn").click(),window.layer.msg("After loading data\uff0cchoose the origin:"+_,{time:3e5}),setTimeout(function(){window.layer.load(1,{shade:[.2,"#fff"]}),B("#edge").click(),Q.map(function(e,t){!function(e,t){setTimeout(function(){B("#link_"+e).click(),t==Q.length&&window.layer.closeAll()},1e3*t)}(e,t+1)})},25e3))},3e3*t-800)}n(114);var U,Y=n(0),H=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).state={node:[],link:[]},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return Y.createElement("div",{id:"container"},Y.createElement(E,{updateState:this.updateState.bind(this),node:this.state.node,link:this.state.link}),Y.createElement(d,{updateState:this.updateState.bind(this),node:this.state.node,link:this.state.link}),Y.createElement(V,{updateState:this.updateState.bind(this),node:this.state.node,link:this.state.link}))}},{key:"componentDidMount",value:function(){window.repaint&&B.ajax({type:"POST",url:"http://localhost:3001/getVisitInfo",data:{visitID:window.repaintVisitID},success:function(e){var t=e.VisitInfo;G=t.placesName.split(" ");var n=parseInt(t.seID);_=G[n],t.unvisiableEdgeID.split(" ").map(function(e,t){Q.push(parseInt(e))}),window.layer.load(1,{shade:[.2,"#fff"]}),B("#panel>.drawer").click();var a=G.length;G.map(function(e,t){W(e,t+1,a)})},error:function(){alert("\u91cd\u7ed8\u65f6\u83b7\u53d6\u4fe1\u606f\u51fa\u9519!")}})}},{key:"updateState",value:function(e,t){var n=this.state.node,a=this.state.link;this.setState({node:e||n,link:t||a})}}]),t}(Y.Component),Z=n(0),P=n.n(Z),J=n(0),q=window.jQuery,z=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=window.username;return J.createElement("div",{id:"headArea"},J.createElement("div",{id:"userInfo"},J.createElement("label",{className:"infoBar"},"Username:"),J.createElement("label",{className:"infoBar"},e),J.createElement("br",null),J.createElement("label",{className:"infoBar"},"Date:"),J.createElement(K,null),J.createElement("br",null),J.createElement("label",{className:"infoBar"},"Content: "),J.createElement("select",{id:"contentType",onChange:this.onSelectChange.bind(this)},J.createElement("option",{value:"action"},"Animations"),J.createElement("option",{value:"que"},"Quiz")),J.createElement("br",null),J.createElement(a.b,{className:"infoBar",to:{pathname:"/",state:{panel:"open"}}},J.createElement("button",{id:"retButton"},"Back to main page"))))}},{key:"onSelectChange",value:function(){var e=q("#contentType option:selected").val();this.selectChangeHandler(e)}},{key:"selectChangeHandler",value:function(e){g.trigger(window.contentType,e)}}]),t}(J.Component),K=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).state={data:new Date},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval(function(){return e.tick()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){this.setState({data:new Date})}},{key:"render",value:function(){return J.createElement("label",{className:"infoBar"},this.state.data.toLocaleTimeString())}}]),t}(J.Component),X=z,$=n(0),ee=window.window.jQuery,te=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).state={content:"action"},n.onSelectChange=n.onSelectChange.bind(Object(b.a)(Object(b.a)(n))),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.setContent();return $.createElement("div",{id:"bodyArea"},e)}},{key:"onSelectChange",value:function(e){this.setState({content:e})}},{key:"componentDidMount",value:function(){g.on(window.contentType,this.onSelectChange)}},{key:"setContent",value:function(){switch(this.state.content){case"action":return this.renderAction();case"que":return this.renderQue()}return"ERROR"}},{key:"renderAction",value:function(){ee.ajax({url:"http://localhost:3001/actions",type:"GET",data:{},async:!1,success:function(e){U=e.actions},error:function(){alert("\u83b7\u53d6\u8bbf\u95ee\u8bb0\u5f55\u4fe1\u606f\u5931\u8d25!")}});var e=U.map(function(e,t){return $.createElement("tr",{key:t,id:"visit"+t},$.createElement("td",{align:"center"},e.visitID),$.createElement("td",{align:"center"},e.algorithm),$.createElement("td",{align:"center"},$.createElement(ne,{visitID:e.visitID,trID:"visit"+t})),$.createElement("td",{align:"center"},$.createElement(ae,{visitID:e.visitID})))});return $.createElement("table",{id:"mtable",border:"1"},$.createElement("thead",null,$.createElement("tr",null,$.createElement("th",null,"ID"),$.createElement("th",null,"Algorithm"),$.createElement("th",null,"Fold/Unfold"),$.createElement("th",null,"Re-Do"))),$.createElement("tbody",null,e))}},{key:"renderQue",value:function(){var e;ee.ajax({url:"http://localhost:3001/getQues",type:"GET",data:{},async:!1,success:function(t){e=t.ques},error:function(){alert("\u83b7\u53d6\u8bbf\u95ee\u8bb0\u5f55\u4fe1\u606f\u5931\u8d25!")}});var t=e.map(function(e,t){var n="Correct";return e.msg!=e.ans&&(n="Incorrect"),$.createElement("tr",{key:t},$.createElement("td",null,e.id),$.createElement("td",null,e.type),$.createElement("td",null,e.que),$.createElement("td",null,e.msg),$.createElement("td",null,e.ans),$.createElement("td",null,n),$.createElement("td",null,e.visitID),$.createElement("td",null,$.createElement(ae,{visitID:e.visitID})))});return $.createElement("table",{id:"mtable",border:"1"},$.createElement("thead",null,$.createElement("tr",null,$.createElement("th",null,"ID"),$.createElement("th",null,"Type"),$.createElement("th",null,"Question"),$.createElement("th",null,"Answer"),$.createElement("th",null,"Key"),$.createElement("th",null,"Judgement"),$.createElement("th",null,"VisitID"),$.createElement("th",null,"Re-Do"))),$.createElement("tbody",null,t))}}]),t}($.Component),ne=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).state={isQueryed:!1,isSpreaded:!1},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e="Unfold";return this.state.isSpreaded&&(e="Fold"),$.createElement("button",{onClick:this.onClickButton.bind(this)},e)}},{key:"onClickButton",value:function(){if(this.state.isQueryed)this.state.isSpreaded?(ee("#table"+this.props.visitID).hide(),this.setState({isSpreaded:!1})):(ee("#table"+this.props.visitID).show(),this.setState({isSpreaded:!0}));else{var e,t=this.props.visitID;ee.ajax({url:"http://localhost:3001/actionDetails",type:"POST",data:{visitID:t},async:!1,success:function(t){e=t.actionDetails},error:function(){alert("\u83b7\u53d6\u52a8\u4f5c\u8868\u4fe1\u606f\u5931\u8d25!")}});var n="";e.map(function(e,t){var a="<tr key="+t+">";a+="<td>"+e.actionID+"</td>",a+="<td>"+e.content+"</td>",a+="<td>"+e.type+"</td>",a+="<td>"+e.stepID+"</td>",n+=a+="</tr>"});var a="<tbody>"+n+"</tbody>",i="<table id=table"+this.props.visitID+" border=1><thead><tr>  <th>\u52a8\u4f5c\u53f7</th> <th>\u5185\u5bb9</th> <th>\u52a8\u4f5c\u7c7b\u578b</th> <th>\u5e27\u53f7</th>  </tr></thead>"+a+"</table>";ee("#"+this.props.trID).after(i),this.setState({isQueryed:!0}),this.setState({isSpreaded:!0})}}}]),t}($.Component),ae=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(r.a)(t).call(this,e))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return $.createElement(a.b,{to:{pathname:"/"}},$.createElement("button",{onClick:this.onBtnClick.bind(this)},"\u8fdb\u5165"))}},{key:"onBtnClick",value:function(){window.repaintVisitID=this.props.visitID,window.repaint=!0}}]),t}($.Component),ie=te;n(114);window.jQuery;window.contentType="action";var oe=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(r.a)(t).call(this,e))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return P.a.createElement("div",{id:"reportsContainer"},P.a.createElement(X,null),P.a.createElement(ie,null))}}]),t}(P.a.Component),se=n(0),le=function(){return se.createElement(a.a,null,se.createElement(i.c,null,se.createElement(i.a,{exact:!0,path:"/",component:H}),se.createElement(i.a,{exact:!0,path:"/reports",component:oe})))},re=n(0),ce=n(276);window.showCode="showCode",window.showAction="showAction",ce.render(re.createElement(le,null),document.getElementById("root"))}},[[118,2,1]]]);
//# sourceMappingURL=main.8056197e.chunk.js.map