{"version":3,"sources":["assets/play.png","assets/pause.png","app/component/Map.js","app/component/MyMenu.js","app/component/Sidebar.js","app/eventProxy.js","app/component/GraphTable.js","app/component/GraphSVG.js","app/SimulateClickEvent.js","app/component/Panel.js","app/routes/MainInterface.js","app/reports-component/BodyInfo.js","app/reports-component/HeadInfo.js","app/routes/Reports.js","app/routes/MyRoute.js","index.js"],"names":["module","exports","React","require","Map","createElement","id","BMap","window","map","point","Point","centerAndZoom","enableScrollWheelZoom","addControl","NavigationControl","ScaleControl","OverviewMapControl","MapTypeControl","setCurrentCity","localSearch","LocalSearch","renderOptions","panel","onInfoHtmlSet","this","bind","poi","dom","_this","console","log","title","node","parentNode","anchor","querySelector","remove","onClick","addNode","querySelectorAll","length","btn","document","str","createTextNode","className","appendChild","onclick","name","lng","lat","nodes","props","findIndex","n","push","updateState","Component","MyMenu","menu","body","innerHTML","prototype","append","items","t","forEach","item","label","addEventListener","click","style","display","popup","x","y","top","left","v","$","jQuery","algo","algos","Sidebar","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","MARGIN_LEFT","RIGHT","state","right","marginLeft","search","_this2","Sidebar_React","key","nodeClick","onContextMenu","ndoeMenuClick","algoDOM","index","value","type","onChange","inputChange","searchClick","handleSelect","confirmClick","react_router_dom","to","close","event","target","is","showDis","setState","clearOverlays","val","preventDefault","nodeTitle","innerText","that","splice","clientX","clientY","_this3","layer","load","shade","link","loadLinks","setTimeout","autoViewport","_load","asyncToGenerator","regenerator_default","a","mark","_callee","i","node1","j","node2","results","wrap","_context","prev","next","Array","from","loadLink","sent","onSearchComplete","stop","apply","arguments","then","repaint","closeAll","catch","err","alert","p1","p2","Promise","resolve","reject","DrivingRoute","point1","point2","resultsObj","plan","getPlan","dis","getDistance","path","getRoute","getPath","polyline","Polyline","addOverlay","setLink","ndoes","points","marker","Marker","Label","offset","Size","setLabel","viewport","getViewport","center","zoom","eventProxy","onObj","oneObj","on","fn","undefined","one","off","trigger","args","concat","slice","GraphTable","tab","code","actions","SELECTED_LINK_COLOR","DEFAULT_LINK_COLOR","onShowCode","assertThisInitialized","onShowAction","content","setContent","GraphTable_React","width","height","backgroundColor","setPTab","setLTab","setMatrixTab","setCodeTab","setActionTab","showCode","showAction","_ref","renderPoint","renderLink","renderMatrix","renderCode","renderAction","td","links","ifVisible","isVisible","ifHighlight","getStrokeColor","highlightLink","nodataGrid","horizonMatrxHead","maxtrixContent","headName","name1","dists","dist","flag","align","cols","rows","autoFocus","readOnly","actionContent","action","l","setStrokeColor","hide","show","stepData","_name","actionStep","STEP_COUNT","question","start","GraphSVG","INITIAL_LINK_COLOR","INITIAL_NODE_COLOR","SELECTED_NODE_COLOR","speed","play","end","S_NODE","S_EDGE","S_NODE_DIS","S_NODE_INFO","clcMaxMin","renderNode","controlstate","GraphSVG_React","ref","version","xmlns","e","checked","checkChange","changeSpeed","animate_back","animate_forward","reSet","resetColor","max_lng","Infinity","min_lng","max_lat","min_lat","mid_lng","mid_lat","w","refs","graph","clientWidth","h","clientHeight","_this3$clcCoordinate","clcCoordinate","_this3$clcCoordinate2","slicedToArray","setSE","color","distance","info","has","get","data","GraphSVG_Node","assign","_this4","_this4$clcCoordinate","_this4$clcCoordinate2","x1","y1","_this4$clcCoordinate3","_this4$clcCoordinate4","x2","y2","s","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","edge","return","GraphSVG_Link","p","getLeft","clearTimeout","timer","go","animate","msg","_this5","edgeIn","pointIn","globalIn","placesName","parseInt","JSON","stringify","start_index","end_index","unvisiableID","n1","n2","parseFloat","String","ajax","url","sName","eName","success","json","steps","stepTemp","split","actionGetHandler","error","_this6","step","getStep","types","params","infos","pop","chooseColor","name2","idx","set","codeName","codeChangeHandler","time","actionID","queType","que","replace","ans","ask","pathNum","path_num","ans_length","path_str","nStep","_this7","offsetLeft","offsetParent","stopPropagation","attributes","prompt","text","visitID","_this8","back_step","_this9","forward_step","Node","_this10","SELECT_COLOR","DEFAULT_COLOR","cx","cy","r","fill","textAnchor","dominantBaseline","fontSize","defineProperty","Link","_this11","stroke","strokeWidth","cursor","onMouseEnter","hover","onMouseLeave","Panel","MARGIN_RIGHT","LEFT","marginRight","Panel_React","component_GraphSVG","component_GraphTable","cities","unvisiableEdgeIdx","addCity","addCityBtn","edgeIdx","unVisiEdge","MainInterface","MainInterface_React","component_Sidebar","component_Map","component_Panel","repaintVisitID","visitInfo","VisitInfo","startIdx","seID","unvisiableEdgeID","tmp","oldNode","oldLink","HeadInfo","username","HeadInfo_React","HeadInfo_Clock","onSelectChange","pathname","contentType","selectChangeHandler","Clock","Date","timerID","setInterval","tick","clearInterval","toLocaleTimeString","BodyInfo","BodyInfo_React","renderQue","async","tableContent","algorithm","BodyInfo_ButtonSpread","trID","BodyInfo_ButtonRenew","border","ques","quesContent","judge","ButtonSpread","isQueryed","isSpreaded","onClickButton","actionDetails","addTableBodyContent","line","stepID","addTableBody","addTable","after","ButtonRenew","onBtnClick","Reports","react_default","reports_component_HeadInfo","reports_component_BodyInfo","MyRoute","MyRoute_React","react_router","exact","component","ReactDOM","render","src_React","routes_MyRoute","getElementById"],"mappings":"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","file":"static/js/main.2df67a56.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfaBBoAAAC1VYTSAAABiklEQVQ4y73Sv04UURTH8e+5M7C7ZndAdgETTbTTxpgIRgoLY2Ik2PoG64PwDEQLEgs6NbYWPoAVCTZWNIRAQpAF/0Ci7u7M+VnMYBbYgUrPKU5ycz+559574F+H5WVmYGntXBDlpU+deNRC6s4VvlwMbmJ1X/Rn9p0d9ymm2DsfTKNJLemhFnSVrYNOlRaT7JeDFt7ytjdU1309rl1iMz0STZoclAE11FYihJp6pAfWs82sKyaY4NtZcBlPvO2J4zgedE1P/I59Ddtp5ozz4zQYR4meFyfkOaJbeuo3bKey26PBGIeDIDkLEKppRvP9MTb8sFo0FnKQlmZ23Rf9rc39LloqQFaSTkqKz/ptL0CcF2d4CLB1luwNJ0FaNgm79tqWK+vp8dAdg2zY5iN7zwutjqR9ROcC0OOjveRD9DMiOzEiw1qSfbZle2cd4xfVgU87fUIAsG1WbGV0wwGnS3f43QJhOqyF/ehVfM+sQo1qySvY3xLpLjGf4q4B/bJXGwBFFVb6K/8n/gBIW70kwgYH3gAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNi0wOS0xN1QxNToxODoyNSswODowMCtEZsAAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTAtMDQtMjZUMDA6MDA6MDArMDg6MDCgVTtdAAAATXRFWHRzb2Z0d2FyZQBJbWFnZU1hZ2ljayA3LjAuMS02IFExNiB4ODZfNjQgMjAxNi0wOS0xNyBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ93ZpU4AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAXdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADQ4h2CHLQAAABZ0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAA0OH/PR6AAAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTI3MjIxMTIwMAkpDe8AAAASdEVYdFRodW1iOjpTaXplADUuODdLQoRSJ5sAAABbdEVYdFRodW1iOjpVUkkAZmlsZTovLy9ob21lL3d3d3Jvb3Qvc2l0ZS93d3cuZWFzeWljb24ubmV0L2Nkbi1pbWcuZWFzeWljb24uY24vc3JjLzEwOS8xMDk0Ni5wbmc6EbOHAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfaBBoAAAC1VYTSAAAAtklEQVQ4y92SPQrCQBCFv1lTWNtbeALxIOk9jYWexk5I6x3S2IpgYZle2OxYZP/EFSwUgq8a3s77WRgYHQRgVXhoC2wLVH6eypoFCghn3XMHQZdS+w2rBzkRBA5msmXuxVc9cgOH1rIL7gpJ0IPBxOTJMNuUT+oSBKBkZpF9QeW9CrDvBWWv/ouC31f6m09L5OSTBIeLnJ/tc4jNBA46NvG8L3SebcIGliaLN+S3N5Au6xigjBIPRFJDfNYyswsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTYtMDktMTdUMTU6MjI6MjQrMDg6MDAD85u8AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDEwLTA0LTI2VDAwOjAwOjAwKzA4OjAwoFU7XQAAAE10RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNy4wLjEtNiBRMTYgeDg2XzY0IDIwMTYtMDktMTcgaHR0cDovL3d3dy5pbWFnZW1hZ2ljay5vcmfd2aVOAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAF3RFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAA0OIdghy0AAAAWdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANDh/z0egAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADEyNzIyMTEyMDAJKQ3vAAAAEnRFWHRUaHVtYjo6U2l6ZQA1LjQ5S0LEGrUpAAAAW3RFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vaG9tZS93d3dyb290L3NpdGUvd3d3LmVhc3lpY29uLm5ldC9jZG4taW1nLmVhc3lpY29uLmNuL3NyYy8xMjIvMTIyMDUucG5naRjBHQAAAABJRU5ErkJggg==\"","let React = require(\"react\");\n\nclass Map extends React.Component{\n    render(){\n        return (\n            <div id=\"map\">\n            </div>\n        );\n    }\n    //组件挂载后创建地图\n\tcomponentDidMount() {\n\t\t// 创建地图实例  \n\t\tvar BMap = window.BMap;    //add by me（不知道为什么，学长那个不用添加全局变量，到这里却不行）\n\t    let map = new BMap.Map(\"map\");\n\t\twindow.map = map;  //commented by me\n\t\t// 创建点坐标  \n\t\tlet point = new BMap.Point(111.539334, 30.47691);\n\t\t// 初始化地图，设置中心点坐标和地图级别 \n\t\tmap.centerAndZoom(point, 5);\n\t\t//开启鼠标滚轮缩放\n\t\tmap.enableScrollWheelZoom(true);\n\t\tmap.addControl(new BMap.NavigationControl());    \n\t\tmap.addControl(new BMap.ScaleControl());    \n\t\tmap.addControl(new BMap.OverviewMapControl());    \n\t\tmap.addControl(new BMap.MapTypeControl());    \n\t\tmap.setCurrentCity(\"武汉\");\n\t\tlet localSearch = new BMap.LocalSearch(map, {\n\t\t\trenderOptions: {map: map,panel: \"results\"},\n\t\t\tonInfoHtmlSet: this.onInfoHtmlSet.bind(this) //如何获得参数的??\n        }); \n        window.localSearch = localSearch;\n\t}\n\n\t//marker设置添加按钮\n\tonInfoHtmlSet(poi, dom){\n\t\tconsole.log(poi);\n\t\tlet title = poi.title;\n\t\tlet point = poi.point;\n\t\tlet node = dom.parentNode.parentNode;\n\t\tlet anchor = node.querySelector(\"a\");\n\t\tif(anchor)anchor.remove();\n\n\t\tlet onClick = ()=>{\n\t\t\tthis.addNode(title, point);\n\t\t}\n\n\t\tif(node.querySelectorAll(\"button\").length<=0){\n\t\t\tlet btn = document.createElement(\"button\");\n\t\t\tlet str = document.createTextNode(\"添加\");\n\t\t\tbtn.className = \"add\";\n\t\t\tbtn.id=\"addCity\";\n\t\t\tbtn.appendChild(str); \n\t\t\tbtn.onclick = onClick;\n\t\t\tnode.appendChild(btn);\n\t\t\treturn;\n\t\t}\n\t\tnode.querySelector(\"button\").onclick = onClick;\n\t}\n\t//add mark point\n\taddNode(title, point){\n        console.log(\"添加：\"+title+point);\n        let node = {\n            name: title,\n            lng: point.lng,\n            lat: point.lat\n        }\n        let nodes = this.props.node;\n        let index = nodes.findIndex(n=>{\n            return n.name === node.name;  //n就代表nodes\n        });\n        if(index<0){                      //添加结点\n            nodes.push(node);\n            this.props.updateState(nodes);\n        }\n\t}\n}\n\nexport default Map;","var MyMenu = function(id){\n    if(!document.querySelector(\"#\"+id)){\n        var menu = document.createElement(\"div\");\n        menu.id = id;\n        menu.className = \"mymenu\";\n        document.body.appendChild(menu);\n    }\n    this.menu = document.querySelector(\"#\"+id);\n    this.menu.innerHTML = \"\";\n};\nMyMenu.prototype.append = function(items){\n    var t = this;\n    items.forEach(item => {\n        var dom = document.createElement(\"div\");\n        dom.className = \"myitem\";\n        dom.innerHTML = item.label;\n        dom.addEventListener(\"click\", function(){\n            item.click();\n            t.menu.style.display = \"none\";\n            return false;\n        } ,true);\n        t.menu.appendChild(dom);\n    });\n}\nMyMenu.prototype.popup = function(x, y){\n    this.menu.style.display = \"block\";\n    this.menu.style.top = y+\"px\";\n    this.menu.style.left = x+\"px\";\n}\ndocument.body.addEventListener('click', function(){\n    document.querySelectorAll(\".mymenu\").forEach(v => v.style.display = \"none\");\n} ,true);\n\n\nexport default MyMenu;","import MyMenu from \"./MyMenu.js\";\nimport {Link} from 'react-router-dom';\n\n//let layer = require(\"./app/layer/layer.js\");\nlet $=window.jQuery;\n\nlet React = require(\"react\");\n\nwindow.algo = \"DFS\";  //保存选择的方法\n\nif(!window.algos)\n\twindow.algos = [\"DFS\",\"dijkstra\"];\n\n\n\n\nclass Sidebar extends React.Component{\n\n\t//它的属性来自APP类，见index.js\n    constructor(props){\n        super(props);\n\n        this.MARGIN_LEFT = 150;\n        this.RIGHT = 10;\n\n        this.state = {\n            right: 0,\n            marginLeft: 0,\n            search: \"\"\n\t\t};\n\t\t\n    }\n    render(){\n        let nodes = this.props.node.map(node=>{\n            let v = node.name;\n            return <p key={v} onClick={this.nodeClick.bind(this)} onContextMenu={this.ndoeMenuClick.bind(this)}>{v}</p>\n\t\t});\n\t\tlet algoDOM = window.algos.map((v, index)=>{\n\t\t\t//if(index===0)window.algo = v;   注销此句，否则window.algo始终是window.algos的第一个算法\n\t\t\treturn <option key={\"algo_\"+v} value={v}>{v+\"算法\"}</option>;\n\t\t});\n\n        return (\n            <div id=\"sidebar\" style={{marginLeft: this.state.marginLeft+\"px\"}}>\n                <div id=\"search\">\n\t\t\t\t\t\t<input type=\"text\" id=\"input\" value={this.state.search} onChange={this.inputChange.bind(this)}/>\n\t\t\t\t\t\t<button id=\"searchOK\" onClick={this.searchClick.bind(this)}>查询</button>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"nodeList\">\n                        {nodes}\n\t\t\t\t\t</div>\n\t\t\t\t<div id=\"algos\">\n\t\t\t\t\t\t<select onChange={this.handleSelect.bind(this)}>\n\t\t\t\t\t\t\t{algoDOM}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t<div id=\"confirm\">\n\t\t\t\t\t\t<button id=\"confirmBtn\" onClick={this.confirmClick.bind(this)}>确定</button>\n\t\t\t\t\t</div>\n\t\t\t\t<div id=\"reports\">\n\t\t\t\t\t<Link id=\"mlink\" to=\"reports\">\n\t\t\t\t\t<button onClick={()=>{}}>报表</button>\n\t\t\t\t\t</Link>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t<div id=\"info\">\n\t\t\t\t\t\t<button >退出</button>\n\t\t\t\t\t</div>\n                <div className=\"drawer\" style={{right: this.state.right+\"px\"}} onClick={this.close.bind(this)}></div>\n            </div>\n        );\n\t}\n\n\t// 选择算法\n\thandleSelect(event){\n\t\tconsole.log(event.target.value);\n\t\twindow.algo = event.target.value;\n\t\tif(Object.is(window.algo,\"dijkstra\"))  //dj算法需要显示距离(直接用等号判断相等存在问题，详见http://www.cnblogs.com/liaokaichang/p/7567433.html)\n\t\t\t\twindow.showDis=true;\t\t\n\t}\n\n    //关闭左栏\n    close(){\n        if(this.state.right!==0){\n            this.setState({\n                right: 0,\n                marginLeft: 0\n            });\n        }else{\n            this.setState({\n                right: -this.RIGHT,\n                marginLeft: -this.MARGIN_LEFT\n            });\n        }\n\t}\n\t\n    //监听输入框变换\n    inputChange(event){\n\t\tthis.setState({search: event.target.value});\n\t}\n\t\n    //点击查询按钮\n    searchClick(){\n        window.map.clearOverlays();\n\t\t//let str = this.state.search;   //注：jquery模拟鼠标点击时，不知道为什么无法更新输入框对应的状态(this.state.search)\n\t\tlet str=$(\"#input\").val();       //为了方便，只好直接使用jquery操作dom\n\t\twindow.localSearch.search(str);  //百度地图查询的api见Map.js\n    }\n    //左击 节点\n    nodeClick(){\n\n    }\n    //右击 节点\n    ndoeMenuClick(event){\n\t\tevent.preventDefault();\n\t\t/*\n\t\tlet nodeTitle = event.target.innerText;\n\t\tlet that = this;\n\t\tlet menu = new nw.Menu();\n\t\tmenu.append(new nw.MenuItem({\n\t\t\tlabel: '移除',\n\t\t\tclick: function(){\n                let nodes = that.props.node;\n                let index = nodes.findIndex(n=>{\n                    return n.name === nodeTitle;\n                });\n                if(index<0)return;\n\n                nodes.splice(index, 1);\n                that.props.updateState(nodes);\n\t\t\t}\n\t\t}));\n\t\tmenu.popup(event.clientX, event.clientY);*/\n\t\t\n\t\tlet nodeTitle = event.target.innerText;\n\t\tlet that = this;\n\t\tlet menu = new MyMenu(\"MyMenu_Node\");\n\t\tmenu.append([{\n\t\t\tlabel: '移除',\n\t\t\tclick: function(){\n                let nodes = that.props.node;\n                let index = nodes.findIndex(n=>{\n                    return n.name === nodeTitle;\n                });\n                if(index<0)return;\n\n                nodes.splice(index, 1);\n                that.props.updateState(nodes);\n\t\t\t}\n\t\t}]);\n\t\tmenu.popup(event.clientX, event.clientY);\n\t\t\n\t\treturn false;\n\t}\n\t\n    //确认节点，点击后要开始搜索路径\n    confirmClick(event){\n\t\twindow.map.clearOverlays();\n        window.layer.load(1, {shade: [0.2,'#fff']});\n        //清空\n        this.props.link.splice(0);\n\t\tthis.loadLinks();\n\t\tsetTimeout(()=>this.autoViewport(), 600);\n\t}\n\t\n\t// 导入全部路线\n\tloadLinks(){\n\t\tlet that = this;\n\t\tasync function load(){\n\t\t\tlet nodes = Array.from(that.props.node);\n\t\t\tfor(let i=0;i<nodes.length;i++){\n\t\t\t\tlet node1 = nodes[i];\n\t\t\t\tfor(let j=i+1;j<nodes.length;j++){\n\t\t\t\t\tlet node2 = nodes[j];\n\t\n\t\t\t\t\tconsole.log(node1.name+\"--->\"+node2.name);\n\t\n\t\t\t\t\tlet results = await that.loadLink(node1,node2);\n\t\t\t\t\tthat.onSearchComplete(results);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tload()\n\t\t.then(()=>{\n\t\t\tif(!window.repaint)                      //主注意需要重绘的时候，不要删除弹出层(在自动取消边后会删除)\n\t\t\t\twindow.layer.closeAll();\n\t\t})\n\t\t.catch(err=>{\n\t\t\t /* global layer */\n            layer.closeAll();\n            console.log(err);\n\t\t\talert(err);\n\t\t});\n\t}\n\t// 导入路线数据\n\tloadLink(node1, node2){\n\t\tvar BMap = window.BMap;    //add my me\n\t\tvar p1 = new BMap.Point(node1.lng, node1.lat);\n\t\tvar p2 = new BMap.Point(node2.lng, node2.lat);\n\n\t\treturn new Promise((resolve, reject)=>{\n\t\t\tlet drivingRoute = new BMap.DrivingRoute(window.map, {renderOptions:{map: null, autoViewport: false}, onSearchComplete:(results)=>{\n\t\t\t\t//if(drivingRoute.getStatus()!==BMap.BMAP_STATUS_SUCCESS){\n\t\t\t\t\t//reject(\"导入失败\");\n\t\t\t\t//};      getStatus返回状态不正确，尚不知原因，暂时注释此部分\n\t\t\t\tresolve({results, node1, node2});\n\t\t\t}});\n\t\t\tdrivingRoute.search(p1, p2);\n\t\t});\n\t}\n\n\t//重写searchRout，使其线性化\n\tsearchRoute(point1, point2){\n\t}\n\n\t// 搜索路线回调函数\n\tonSearchComplete(resultsObj){\n        let results = resultsObj.results;\n        let node1 = resultsObj.node1;\n        let node2 = resultsObj.node2;\n        \n\t\tlet plan = results.getPlan(0);\n\t\tlet dis = plan.getDistance(true);\n\t\tlet route = plan.getRoute(0);\n\t\tlet path = route.getPath();\n\t\tvar BMap = window.BMap;    //add my me\n\t\tlet polyline = new BMap.Polyline(path);\n\t\twindow.map.addOverlay(polyline);\n\t\t\n\t\tthis.setLink(node1, node2, dis, polyline);\n\t}\n\n\t// 设置路线到 main 的 state\n\tsetLink(node1, node2, dis, polyline){\n        let link = this.props.link;\n        link.push({node1, node2, dis, polyline});\n        this.props.updateState(null, link);\n\t}\n\t\n\t//根据所选node设置最佳视图\n\tautoViewport(){\n\t\tlet ndoes = this.props.node;\n\t\t//console.log('nodes'+nodes);\n\t\tlet points = [];\n\t\tndoes.forEach(node=>{\n\t\t\tvar BMap = window.BMap;    //add my me\n\t\t\tlet point = new BMap.Point(node.lng, node.lat);\n\t\t\tpoints.push(point);\n\t\t\t//添加marker\n\t\t\tlet marker = new BMap.Marker(point, {title: node.name}); \t\n\t\t\tlet label = new BMap.Label(node.name, {offset:new BMap.Size(20,-10)});\n\t\t\tmarker.setLabel(label);\n\t\t\twindow.map.addOverlay(marker);\n\t\t});\n\t\tlet viewport = window.map.getViewport(points);\n\t\twindow.map.centerAndZoom(viewport.center, viewport.zoom);\n\t}\n}\n\nexport default Sidebar;","// eventProxy.js\n//add by cdz, 用于组件间通信（订阅者、发布者模式）\n//此项目用于在GraphSVG 和　GraphTable间传递消息，更新显示代码(showCode)\n\n\n'use strict';\n\nconst eventProxy = {\n  onObj: {},\n  oneObj: {},\n  on: function(key, fn) {\n    if(this.onObj[key] === undefined) {\n      this.onObj[key] = [];\n    }\n\n    this.onObj[key].push(fn);\n  },\n  one: function(key, fn) {\n    if(this.oneObj[key] === undefined) {\n      this.oneObj[key] = [];\n    }\n\n    this.oneObj[key].push(fn);\n  },\n  off: function(key) {\n    this.onObj[key] = [];\n    this.oneObj[key] = [];\n  },\n  trigger: function() {\n    let key, args;\n    if(arguments.length == 0) {\n      return false;\n    }\n    key = arguments[0];\n    args = [].concat(Array.prototype.slice.call(arguments, 1));\n\n    if(this.onObj[key] !== undefined\n      && this.onObj[key].length > 0) {\n      for(let i in this.onObj[key]) {\n        this.onObj[key][i].apply(null, args);\n      }\n    }\n    if(this.oneObj[key] !== undefined\n      && this.oneObj[key].length > 0) {\n      for(let i in this.oneObj[key]) {\n        this.oneObj[key][i].apply(null, args);\n        this.oneObj[key][i] = undefined;\n      }\n      this.oneObj[key] = [];\n    }\n  }\n};\n\nexport default eventProxy;","import eventProxy from \"../eventProxy.js\"\nlet React = require('react');\n\n\n//let node = [], link = [];  用不上\n//let selectLink;\n\n\n//关于显示代码：此组件作为消息订阅者!\nclass GraphTable extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            tab: 1,\n            code:'',\n            actions:[]\n        };\n        this.SELECTED_LINK_COLOR = \"#ff0000\";\n        this.DEFAULT_LINK_COLOR = \"#3a6bdb\";\n        this.onShowCode=this.onShowCode.bind(this);  //绑定消息监听函数\n        this.onShowAction=this.onShowAction.bind(this);  //如果你不绑定方法，那么在事件发生并且精确调用这个方法时，方法内部的this会丢失指向。\n    }\n   \n    render(){\n        let content = this.setContent(this.props); //props继承自panel，而panel的props来自App\n        return ( \n            <div style={{width: '100%', height:'100%'}}>\n                <div id=\"tab\">\n                    <div style={{backgroundColor:this.state.tab===1?\"#999\":\"#CCC\"}} onClick={this.setPTab.bind(this)}>顶点</div>\n                    <div style={{backgroundColor:this.state.tab===2?\"#999\":\"#CCC\"}} id=\"edge\" onClick={this.setLTab.bind(this)}>边</div>\n                    <div style={{backgroundColor:this.state.tab===3?\"#999\":\"#CCC\"}} onClick={this.setMatrixTab.bind(this)}>矩阵</div>\n                    <div style={{backgroundColor:this.state.tab===4?\"#999\":\"#CCC\"}} onClick={this.setCodeTab.bind(this)}>代码</div>\n                    <div style={{backgroundColor:this.state.tab===5?\"#999\":\"#CCC\"}} onClick={this.setActionTab.bind(this)}>动作</div>\n                </div>\n                <div id=\"tabContent\">{content}</div>\n            </div>\n        );\n    }\n\n    ///当GraphSVG组件传递代码过来时，调整tab状态，使其处于代码显示栏，同时更新代码\n    onShowCode(code){  \n        //this.setState({tab:4});  //更新tab状态则会自动跳转到代码栏\n        this.setState({code:code});\n    }\n\n    onShowAction(actions)\n    {\n        //this.setState({tab:5});\n        this.setState({actions:actions});\n    }\n    \n    componentDidMount(){\n        eventProxy.on(window.showCode,this.onShowCode);     //window.showCode见index.js\n        eventProxy.on(window.showAction,this.onShowAction);  \n    }\n\n    //点击“顶点”\n    setPTab(){\n        this.setState({\n            tab: 1\n        });\n    }\n    //点击“边”\n    setLTab(){\n        this.setState({\n            tab: 2\n        });\n    }\n\n    //点击\"矩阵\"\n    setMatrixTab()\n    {\n        this.setState({\n            tab:3\n        });\n    }\n\n    //点击“代码”\n    setCodeTab(){\n        this.setState({\n            tab:4\n        });\n    }\n\n    //点击\"动作\"\n    setActionTab()\n    {\n        this.setState({\n            tab:5\n        });\n    }\n\n    //点击菜单后渲染\n    setContent( {node, link} ){\n        switch(this.state.tab){\n            case 1:\n                //顶点\n                return this.renderPoint(node);\n                break;\n            case 2:\n                //边\n                return this.renderLink(link);\n                break;\n            case 3:\n                return this.renderMatrix(node,link);\n                break;\n            case 4:\n                return this.renderCode();\n                break;\n            case 5:\n                return this.renderAction();\n                break;\n        }\n        return \"ERROR\";\n    }\n\n    renderPoint(nodes){\n        let td = nodes.map(node=>{\n            return (\n                <tr key={node.name}>\n                    <td>{node.name}</td>\n                    <td>{node.lng}</td>\n                    <td>{node.lat}</td>\n                </tr>\n            );\n        });\n        return (\n            <table>\n                <thead>\n                    <tr>\n                        <th>地点</th>\n                        <th>经度</th>\n                        <th>纬度</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {td}\n                </tbody>\n            </table>\n        );\n    }\n    renderLink(links){     //index应该是link元素在links中的索引\n        let td = links.map((link, index)=>{\n            let ifVisible = link.polyline.isVisible();\n            let color = link.polyline.getStrokeColor();\n            let ifHighlight = color === this.SELECTED_LINK_COLOR;\n\n            return (\n                <tr key={link+\"-\"+index} onClick={this.highlightLink(link).bind(this)} style={{backgroundColor:ifHighlight?\"#DDD\":\"#FFF\"}}>\n                    <td>{link.node1.name+\" -> \"+link.node2.name}</td>\n                    <td>{link.dis}</td>\n                    <td id={\"link_\"+index} onClick={this.setLink(link).bind(this)}>{ifVisible?\"Yes\":\"No\"}</td>\n                </tr>\n            );\n        });\n\n        return (\n            <table>\n                <thead>\n                    <tr>\n                        <th>路线</th>\n                        <th>距离</th>\n                        <th>选择</th>\n                    </tr> \n                </thead>\n                <tbody>\n                    {td}\n                </tbody>\n            </table>\n        );\n    }\n   \n\n    renderMatrix(nodes,links)\n    {\n        const nodataGrid=<th></th>;               //空格\n        let horizonMatrxHead=nodes.map(node=>{　　//第一排表头\n                return(\n                    <th>{node.name}</th>\n                );\n        });\n        let maxtrixContent=nodes.map(node=>{     //表格内容\n            let headName=<th>{node.name}</th>;\n        \n            let name1=node.name;\n            let dists=nodes.map(node=>{\n                let dist;\n                let flag=0;\n                for(var i=0;i<links.length;i++)\n                {\n                    if(links[i].polyline.isVisible() && (name1==links[i].node1.name && node.name==links[i].node2.name)||(name1==links[i].node2.name && node.name==links[i].node1.name))\n                    {\n                        dist=links[i].dis;\n                        flag=1;\n                    }\n                }\n                if(flag==1)                //两个点相连\n                    return(\n                        <td align=\"center\">{dist}</td>\n                    );\n                else\n                        return(\n                            <td align=\"center\">∞</td>\n                        );\n            });\n            return(\n                <tr>\n                {headName}\n                {dists}\n                </tr>\n            );\n        });\n\n        return(\n            <table>\n              {nodataGrid} \n              {horizonMatrxHead}\n              {maxtrixContent}\n            </table>\n        );\n    }\n\n    renderCode(){     //渲染代码，使用layer  (iframe高度无法使用相对高度，应为tabContent的限制)\n        return(\n            <textarea   cols=\"80\" rows=\"30\" value={this.state.code} autoFocus readOnly></textarea>\n        );\n    }\n   \n    //渲染动作表\n    renderAction()\n    {\n        let actions=this.state.actions;           //因为actions中有重复的动作，因此下面需要key(index)加以区分！\n        console.log(actions);\n        let actionContent=actions.map((action,index)=>{\n            return(\n               <tr key={index}>\n                   <td align=\"center\">\n                    {action}\n                   </td>\n               </tr>\n            );\n        });\n        return(\n            <table >\n                {actionContent}\n            </table>\n        );\n    }\n\n    highlightLink(link){\n        return function(event){\n            let links = this.props.link;\n            links.forEach(l=>{\n                l.polyline.setStrokeColor(this.DEFAULT_LINK_COLOR);\n            });\n            link.polyline.setStrokeColor(this.SELECTED_LINK_COLOR);\n            this.props.updateState(null, links);\n        }\n    }\n\n    setLink(link){\n        return function(event){\n            let links = this.props.link;\n            let visible = link.polyline.isVisible();\n\n            if(visible)\n                link.polyline.hide();\n            else \n                link.polyline.show();\n\n            this.props.updateState(null, links);\n        }\n    }\n}\n\nexport default GraphTable;","//import d3 from './d3.v4.min.js';\n//window.d3 = d3;\n//import $ from 'jquery';  //引入jquery\nimport Graph from \"./Graph.js\";\nimport MyMenu from \"./MyMenu.js\";\nimport eventProxy from \"../eventProxy.js\"\nimport { assertFunctionParent } from \"babel-types\";\nrequire('../../assets/play.png');\nrequire('../../assets/pause.png');\nlet React = require('react');\n\n\n//readme: 学长的代码中node的改变是通过state.S_NODE实现，edge(颜色)的改变是通过this.props.link实现!!!!!\n//经补充修改后，边上路径长度的改变通过state.S_EDGE实现\n   \n//import stepData from \"./testData.js\";\nlet $=window.jQuery;\nlet stepData = null;\nlet _name = [];     //存储点名\n//let STEP_COUNT = 0;　　　//学长以STEP_COUNT记录每一个动作的编号（是动作不是帧！！）->改为每一帧的编号\nlet actionStep={};        //用于存储步骤动作信息,eg:   {3:[3,4,5,6]}表示第三帧包含动作3、4、５、６\nlet STEP_COUNT=1;         //全局记录当前演示的帧数\nwindow.question = true;\n\nclass GraphSVG extends React.Component{\n    //其属性来自Panel...this.pros的传递,包括updtaState、node、link\n    constructor(props){\n        super(props);\n        this.state = {};\n\n        //注意：关于点、边的颜色\n        //ＤＦＳ后台传递的颜色：初始化边表示（１０，１０，１０），初始点表示(91,155,2１3),选中点边表示（255,0,0）\n        //DJ后台传递颜色:初始化边（１０，１０，１０），初始化点（９１，１５５，２１３），\n\n        this.DEFAULT_LINK_COLOR = \"#3a6bdb\";  //默认是(浅蓝色)\n        this.INITIAL_LINK_COLOR = \"#0a0a0a\";   //初始化后边的颜色\n        this.INITIAL_NODE_COLOR = \"#5B9BD5\";  //初始化后点的颜色\n        this.SELECTED_LINK_COLOR = \"#ff0000\";   //选中的边，红色\n        this.SELECTED_NODE_COLOR = \"#ff0000\";   //选中的点     \n       \n        //this.path = null;\n\n        this.state.speed = 0.5;\n        this.state.play = \"stop\";\n        this.state.start = \"\";\n        this.state.end = \"\";\n        this.state.S_NODE = new Map(); //更新点的颜色;　　　　　　　　　Map是一组键值对的结构，具有极快的查找速度(误以为是Map.js导出的Map类)\n        this.state.S_EDGE = new Map();  //更新边的距离\n        this.state.question= true;\n        this.state.S_NODE_DIS=new Map(); //更新点到起点的距离\n        this.state.S_NODE_INFO=new Map(); //更新点旁边的其他信息，如显示不等式\n    }\n\n    render(){\n        this.clcMaxMin();\n        let nodes = this.renderNode();\n        let links = this.renderLink();\n\n        let controlstate = this.state.play===\"play\"?\"pauseState\":\"playState\";\n\n        return (\n            <div id=\"graphWrap\">\n                <div id=\"main\">\n                    <div style={{width:\"100%\", height:\"100%\", backgroundColor:\"#FFF\"}}>\n                        <svg ref=\"graph\" width=\"100%\" height=\"100%\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" onContextMenu={(e)=>{e.preventDefault();}}>\n                            {links}\n                            {nodes}\n                        </svg>\n                    </div>\n                </div>\n                <div id=\"tool\">\n                    <div id=\"question\"> 提问 <input id=\"question_checkbox\" type=\"checkbox\" checked={this.state.question} onChange={this.checkChange.bind(this)}/> </div>\n                    <div id=\"speed\" title=\"速度\" onClick={this.changeSpeed.bind(this)}>\n                        <div id=\"speedValue\" style={{width: this.state.speed*100+\"%\"}}></div>\n                    </div>\n                    <div id=\"prev\" title=\"上一步\" onClick={this.animate_back.bind(this)}></div>\n                    <div id=\"start\" title=\"开始/暂停\" className={controlstate} onClick={this.play.bind(this)}></div>\n                    <div id=\"next\" title=\"下一步\" onClick={this.animate_forward.bind(this)}></div>\n                    <div id=\"end\" title=\"结束\" onClick={this.stop.bind(this)}></div>\n                    <div id=\"reset\" title=\"复位\" onClick={this.reSet.bind(this)}></div>\n                </div>\n            </div>\n        );\n    }\n\n    //右上角全部复位！\n    reSet()\n    {    //复位！\n        stepData = null;\n        _name = [];     //存储点名\n        actionStep={};        //用于存储步骤动作信息,eg:   {3:[3,4,5,6]}表示第三帧包含动作3、4、５、６\n        STEP_COUNT=1;         //全局记录当前演示的帧数\n        window.question = true;\n\n        this.resetColor();\n\n        this.state.speed = 0.5;\n        this.state.play = \"stop\";\n        this.state.start = \"\";\n        this.state.end = \"\";\n        this.state.S_NODE = new Map(); //更新点的颜色;　　　　　　　　　Map是一组键值对的结构，具有极快的查找速度(误以为是Map.js导出的Map类)\n        this.state.S_EDGE = new Map();  //更新边的距离\n        this.state.question= true;\n        this.state.S_NODE_DIS=new Map(); //更新点到起点的距离\n        this.state.S_NODE_INFO=new Map(); //更新点旁边的其他信息，如显示不等式\n    }\n    //是否提问状态改变\n    checkChange(e){\n        window.question = e.target.checked;\n        console.log(window.question);\n        this.setState({question: !this.state.question});\n    }\n\n    clcMaxMin(){\n        let max_lng = -Infinity, min_lng = Infinity;\n        let max_lat = -Infinity, min_lat = Infinity;\n\n        this.mid_lng = 0;\n        this.mid_lat = 0;\n\n        this.props.node.forEach(node=>{\n            if(node.lat>max_lat)max_lat = node.lat;\n            if(node.lat<min_lat)min_lat = node.lat;\n\n            if(node.lng>max_lng)max_lng = node.lng;\n            if(node.lng<min_lng)min_lng = node.lng;\n            \n            this.mid_lng += node.lng;\n            this.mid_lat += node.lat;\n        });\n\n        this.max_lng = max_lng;\n        this.min_lng = min_lng;\n\n        this.max_lat = max_lat;\n        this.min_lat = min_lat;\n\n        this.mid_lng /= this.props.node.length;\n        this.mid_lat /= this.props.node.length;\n    }\n\n    clcCoordinate(lng, lat){\n        let w = this.refs.graph.clientWidth;\n        let h = this.refs.graph.clientHeight;\n\n        let margin = 50;\n\n        // w = (w-margin - margin)/(this.max_lat-this.min_lat + 0.001)*(lat-this.min_lat) + margin;\n        // h = h - ( (h-margin - margin)/(this.max_lng-this.min_lng + 0.001)*(lng-this.min_lng) + margin ) ;\n\n        w = (w-margin - margin)/(this.max_lng-this.min_lng + 0.001)*(lng-this.min_lng) + margin;\n        h = h - ( (h-margin - margin)/(this.max_lat-this.min_lat + 0.001)*(lat-this.min_lat) + margin ) ;\n\n        return [w, h];\n    }\n\n    renderNode(){\n        let nodes = this.props.node;\n        let svg = nodes.map(node=>{\n            let [x, y] = this.clcCoordinate(node.lng, node.lat);\n            let name = node.name;\n            let setSE = this.setSE.bind(this);\n            let color = null;\n            let distance='';\n            let info='';  //显示不等式\n\n            if(this.state.start===node.name){\n                color = \"#CCFFFF\";\n            }\n             if(this.state.end===node.name){\n                color = \"#CC6699\";\n            }\n            if(this.state.S_NODE.has(node.name)){\n                color = this.state.S_NODE.get(node.name);\n            }\n            if(this.state.S_NODE_DIS.has(node.name)){\n                distance=this.state.S_NODE_DIS.get(node.name);\n            }\n            if(this.state.S_NODE_INFO.has(node.name)){\n                info=this.state.S_NODE_INFO.get(node.name);\n            }\n            let data = {name, x, y, setSE, color,distance,info};   //把data作为属性传递给Node\n            return ( <Node key={\"node\"+node.name} {...data}/> );   //Node类在此脚本末尾！\n            //react利用key来识别组件，它是一种身份标识标识,与props中的属性不同！！！\n        });\n        return svg;\n    }\n\n    renderLink(){\n        let links = this.props.link;\n        let svg = links.map(link=>{\n            if(!link.polyline.isVisible())return;\n            let [x1, y1] = this.clcCoordinate(link.node1.lng, link.node1.lat);\n            let [x2, y2] = this.clcCoordinate(link.node2.lng, link.node2.lat);\n            let s = {\n                name: link.node1.name,\n                x: x1,\n                y: y1,\n            };\n            let e = {\n                name: link.node2.name,\n                x: x2,\n                y: y2,\n            };\n            let color = link.polyline.getStrokeColor();\n            let dis='';  //边的长度\n            for(var edge of this.state.S_EDGE){\n                if((link.node1.name===edge[1][0]&&link.node2.name===edge[1][1])||(link.node1.name===edge[1][1]&&link.node2.name===edge[1][0])){\n                    dis=edge[0]; //距离赋值\n                    break;\n                }\n            }\n           \n            console.log(color, link);\n            return ( <Link key={\"link-\"+s.name+\"-\"+e.name} from={s.name} to={e.name} x1={s.x} y1={s.y} x2={e.x} y2={e.y} color={color} distance={dis}/> );\n        });\n        return svg;\n    }\n\n    changeSpeed(event){\n        let p = (event.clientX - this.getLeft(event.target)) / event.target.clientWidth;\n        console.log(p);\n        this.setState({speed: p});\n    }\n\n    play(event){\n        if(this.state.play===\"stop\"){\n            this.setState({play: \"play\"});\n            clearTimeout(window.timer);\n            this.go();           //go()包含了初始化以及animate\n            \n        }else if(this.state.play===\"pause\"){\n            this.setState({play: \"play\"});\n            this.animate();     //继续执行\n\n        }else if(this.state.play===\"play\"){\n\n            this.setState({play: \"pause\"});\n            clearTimeout(window.timer);  //暂停,取消计时器他就不再执行（但是所有状态都保存着<最重要是STEP_COUNT>，下次继续animate即可继续执行）\n\n        }\n    }\n\n    stop(){\n        clearTimeout(window.timer);\n        actionStep.STEP_COUNT = 1;\n        this.setState({play: \"stop\", start: \"\", end: \"\"});\n         /* global layer */\n        layer.msg(\"结束\");\n    }\n\n    //消息发布，用于组件间传递代码信息!\n    codeChangeHandler(code){\n        eventProxy.trigger(window.showCode,code);\n    }\n    actionGetHandler(actions){\n        eventProxy.trigger(window.showAction,actions);\n    }\n\n    //执行（包括数据传递给C++以及根据C++回传数据显示），会调用animate\n    go(){\n        if(!this.state.start || !this.state.end){\n            this.setState({play:\"stop\"});\n            return this.stop();\n        };\n\n        var that = this;   //this对象在程序中随时会改变，而var that=this之后，that没改变之前仍然是指向当时的this，这样就不会出现找不到原来的对象。\n\n        var edgeIn = [];\n        var pointIn = [];\n        var globalIn = [];\n\n\n        _name = [];       //存储点的名字\n        var placesName=\"\";\n\n        this.props.node.forEach(node=>{  //提取每个点的经度、维度、编号并存储在pointIn中(C++程序需要输入的点信息)\n            _name.push(node.name);\n            placesName=placesName+node.name+\" \";\n            let lng = parseInt(node.lng);\n            let lat = parseInt(node.lat);\n            let index = '*'+(_name.length-1)+'*'\n            pointIn.push([index, lng, lat]);\n        });\n        pointIn = JSON.stringify(pointIn);\n\n        var start_index = '*'+(_name.findIndex(v=>v===this.state.start))+'*';  //找到起点、终点的编号\n        var end_index = '*'+(_name.findIndex(v=>v===this.state.end))+'*';\n\n\n        globalIn.push([pointIn.length]);     //globalIn代表C++程序输入的参数：点数、？\n        globalIn.push([-1000, 1000]);\n        globalIn.push([1000, -1000]);\n        globalIn = JSON.stringify(globalIn);\n\n        \n        that.resetColor();\n        let S_NODE = new Map();\n        let S_EDGE = new Map();\n        let S_NODE_DIS=new Map();\n        let S_NODE_INFO=new Map();\n        this.setState({S_NODE, S_EDGE,S_NODE_DIS,S_NODE_INFO});  //向 setState() 中传入一个对象来对已有的 state 进行更新。\n\n        var unvisiableID=\"\";                           //记录删除掉的边，用于重绘\n        this.props.link.forEach((link,index)=>{        //整理edgeIn(编号、编号、距离),作为C++程序传入参数\n            if(!link.polyline.isVisible()){\n                unvisiableID=unvisiableID+String(index)+\" \";           \n                return;\n            }\n            let n1 = '*'+_name.findIndex(v=>v===link.node1.name)+'*';\n            let n2 = '*'+_name.findIndex(v=>v===link.node2.name)+'*';\n            edgeIn.push([n1, n2, parseFloat(link.dis, 10)]);\n        });\n        edgeIn = JSON.stringify(edgeIn);\n//////////////////////////////////////////////////////\n        window.layer.load(1, {shade: [0.4,'#fff']});\n        $.ajax({\n            type:\"POST\",\n            url:\"http://localhost:3001/data\",\n            //url:\"/data\",\n            data:{edgeIn:edgeIn,pointIn:pointIn,globalIn:globalIn,sName:start_index,eName:end_index,algo:window.algo,placesName:placesName,unvisiableID:unvisiableID,repaint:window.repaint},\n            success: function(json){\n                if(window.repaint)                         //如果是重绘,当返回重绘的动作后，置为null，下次才能正常记录访问情况！\n                    window.repaint=null;\n                //console.log(_name);\n                //console.log({start_index, end_index});\n                //console.log(json);\n                // //stepData包括code、steps  //stepData是C++计算传回的数据,根据stepData,前端做出相应动作\n                stepData = json;  //steps的数据是各个动作的含义，比如：\tchangeNodeColor(2,RGB(255,0,0))\tAnimation\t8\n                layer.closeAll();\n                \n                let actions=[];\n                //先读一遍数据，记录每一帧对应的动作编号，便于快进、返回;   同时记录动作内容，用于组件通信\n                for(var i=0;i<stepData.steps.length-1;i++){  //暂未搞懂为什么多了一条动作？？？\n                    //得到该动作对应帧的编号\n                    var stepTemp=stepData.steps[i].split('\\t')[3];    \n                    //将该动作编号纳入帧编号\n                    if(stepTemp in actionStep)\n                        actionStep[stepTemp].push(i);\n                    else{\n                        actionStep[stepTemp]=[];\n                        actionStep[stepTemp].push(i);\n                    }\n                    actions.push(stepData.steps[i].split('\\t')[1]);         //存储动作内容\n                }\n                that.actionGetHandler(actions);                            //动作内容传递给Graphtable组件           \n\n                // 开始动画\n                that.animate();   //不能用this，因为ajax中的this已经不在代表外面的组件了!!!\n            },\n            error: function(){\n                layer.closeAll();\n                layer.msg(\"出错, 提交失败\");\n            }\n        });\n//////////////////////////////////////////////////////\n\n        // that.animate();\n\n    }\n\n    //执行动画\n    //注意：当Question、showHelp、showCode时，之所以return是为了结束当前函数，不再执行当前函数末尾的animate\n    //因为在else if中会使用layer，内部接着使用了setTimeout和animate继续下去\n    animate(){\n        // if(this.state.play!==\"play\")return;\n        //setTimeout(code,millisec), code是要执行的代码，lillisec是遇到setTimer后要等待多少毫秒才执行code!\n        //返回数值id，整型，可用于 取消 setTimeout 设置的函数clearTimeout(id)。也就是这个setTimeout的唯一标示符\n        window.timer = setTimeout(()=>{\n\n            let step = this.getStep(STEP_COUNT);  //获取一帧的全部数据\n            layer.closeAll();\n            STEP_COUNT++;\n            if(step===null){\n                this.stop();\n                return;\n            }\n            let links = this.props.link;  //将要更新的元素\n            let S_NODE = this.state.S_NODE;\n            let S_EDGE=this.state.S_EDGE;\n            let S_NODE_DIS=this.state.S_NODE_DIS;\n            let S_NODE_INFO=this.state.S_NODE_INFO;\n\n            for(var i=0;i<step.types.length;i++){\n                if(step.types[i]===\"changeEdgeColor\"){\n                    let params = step.infos[i][1].split(\"(\")[1].split(\",\");\n                    params.pop();\n                    let color = step.infos[i][1].split(\"RGB\")[1];\n                    color = this.chooseColor(color);\n                \n                    //改变边的颜色\n                    let name1 = _name[parseInt(params[0])];\n                    let name2 = _name[parseInt(params[1])];\n                    links.forEach(link=>{\n                        if(link.polyline.isVisible()){\n                            if((link.node1.name===name1&&link.node2.name===name2)||(link.node1.name===name2&&link.node2.name===name1)){\n                                link.polyline.setStrokeColor(color);\n                            }\n                        }\n                    });\n                    //this.props.updateState(null, links);\n                }\n                else if(step.types[i]===\"changeNodeColor\"){\n                    let idx = step.infos[i][1].split(\"(\")[1].split(\",\")[0];\n                    idx = parseInt(idx);\n                    let color = step.infos[i][1].split(\"RGB\")[1];\n                    color = this.chooseColor(color);\n                    let name = _name[idx];  //找到编号对应的点名\n                    S_NODE.set(name,color);  //S_NODE是键值对，改变name对应点的状态\n                    //this.setState({S_NODE});\n                }\n                else if(step.types[i]===\"changeEdgeLength\"){\n                    //\"20\tchangeEdgeLength(0,1,1173)\tAnimation\t2\";\n                    var params=step.infos[i][1].split('(')[1].split(')')[0].split(','); //获取点编号、边距离\n                    let name1 = _name[parseInt(params[0])];  //起点编号\n                    let name2 = _name[parseInt(params[1])];　\n                   let dis=parseFloat(params[2]);\n                   S_EDGE.set(dis,[name1,name2]);\n                \n                }\n                else if(step.types[i]===\"changeNodeDist\"){\n                    var params=step.infos[i][1].split('(')[1].split(')')[0].split(',');\n                    let idx=parseInt(params[0]);  //点的编号\n                    let distance=parseFloat(params[1]);\n                    let name=_name[idx];   //点名\n                    S_NODE_DIS.set(name,distance);\n                }\n                else if(step.types[i]===\"showCode\"){\n                    var that=this;\n                    var param=step.infos[i][1].split('(')[1].split(')')[0];\n                    var codeName=\"code\"+param+\".txt\";\n                    $.ajax({\n                        type:\"POST\",\n                        url:\"http://localhost:3001/code\",\n                        //url:\"/code\",\n                        data:{codeName:codeName},\n                        success: function(code){\n                        that.codeChangeHandler(code);   //不能用this，因为ajax中的this已经不在代表外面的组件了!!!???\n                        },\n                        error: function(){\n                            console.log('获取代码失败！');\n                        }\n                    });\n                }\n                else if(step.types[i]===\"showHelp\"){\n                    let msg = step.infos[i][1].split(\"(\")[1].split(\")\")[0];\n                    layer.msg(msg, {time: this.state.speed *3000 +70});   \n                }\n                else if(step.types[i]===\"Question\" && window.question){\n                    let actionID=step.infos[i][0];\n                    let queType=step.infos[i][1].split('(')[1].split(',')[0];       //问题类型\n                    let que=step.infos[i][1].split('(')[1].split(',')[1];        //que对应问题的内容\n                    if(que[0]===\"*\")                    //打个补丁，针对dijkstra提问为：*1*在本次循环后到起点的距离为？　的情况\n                    {\n                       que=que.replace(/\\*/g,\"\");\n                       que=que.replace(que[0],_name[que[0]]);\n                    }\n\n                    let ans = step.infos[i][1].split('(')[1].split(',')[2];     //ans对应动作中给出的答案 \n                    if(ans[0]===\"*\"){                    //标准答案，返回的是 *2* 类型\n                        ans = ans.replace(/\\*/g, \"\");\n                        ans = _name[ans];\n                        return this.ask(que, ans, queType,actionID);   \n                    }\n                    else                                //答案不只一个地点(默认10个和以内),数字转化为文字路径\n                    {\n                        if(Object.is(window.algo,\"dijkstra\"))      //dj数字答案直接返回\n                            return this.ask(que,ans, queType,actionID);\n                        let pathNum=parseInt(ans);\n                        let path_num=[];\n                        let ans_length=ans.length;\n                        while(ans_length>=1)\n                        {\n                            path_num.push(pathNum%10);\n                            pathNum=parseInt(pathNum/10);   //js竟然不能整除!!!\n                            ans_length--;\n                        }\n\n                        let path_str;\n                        for(let i=path_num.length-1;i>=0;i--)\n                        {\n                            if(i==path_num.length-1)\n                                path_str=_name[path_num[i]]+\"->\";\n                            else if(i==0)   \n                                path_str=path_str+_name[path_num[i]];\n                            else\n                                path_str=path_str+_name[path_num[i]]+\"->\";\n\n                        }\n                        return this.ask(que,path_str, queType,actionID);\n                    }\n                 \n                }\n                else if(step.types[i]===\"showInequality\"){\n                    var params=step.infos[i][1].split('(')[1].split(')')[0].split(',');\n                    let idx=parseInt(params[0]);  //点的编号\n                    let info=params[1];\n                    let name=_name[idx];   //点名\n                    S_NODE_INFO.set(name,info);\n                }\n                else if(step.types[i]===\"InequalityDisapper\"){\n                    var params=step.infos[i][1].split('(')[1].split(')')[0].split(',');\n                    let idx=parseInt(params[0]);  //点的编号\n                    let info='';  //将信息（不等式）置空\n                    let name=_name[idx];   //点名\n                    S_NODE_INFO.set(name,info);\n                }     \n            }\n\n            //对一帧中的各元素统一进行刷新\n            this.props.updateState(null, links);\n            //this.setState({S_NODE});\n            //this.setState({S_EDGE});\n            //this.setState({S_NODE_DIS});\n            //this.setState({S_NODE_INFO});\n            this.setState({S_NODE,S_EDGE,S_NODE_DIS,S_NODE_INFO});\n            this.animate();  //重复执行\n\n        }, this.state.speed *3000 +70);\n    \n    }\n\n   \n    //学长原来是获取每一个动作信息－>此处改为获取每一个步骤(帧)的信息\n    getStep(nStep){\n\n        console.log(\"get step:\"+nStep); //读取一帧的数据\n\n        var types=new Array(); //创建数组，用于保存动作信息\n        var infos=new Array(); \n\n        if(nStep in actionStep){\n            for(var i=0;i<actionStep[nStep].length;i++){\n                let info = stepData.steps[actionStep[nStep][i]].split('\\t');  //第ACTION_COUNT条动作信息(作为数组保存在info)                  \n                let type = info[1].split('(')[0];   //info[1]代表动作的解释：changeNodeColor(4,RGB(91,155,213))；  则type对应changeNodeColor\n                types.push(type);\n                infos.push(info);\n            }\n            return {types, infos};  //返回对象，对象的属性是键值对\n        }\n        return null;\n  \n    }\n\n    chooseColor(color){\n        switch(color){\n            case \"(10,10,10))\": return this.INITIAL_LINK_COLOR;   //初始化边（接近黑色）\n            case \"(91,155,213))\": return this.INITIAL_NODE_COLOR; //初始化点（接近蓝色)\n            case \"(255,0,0))\": return this.SELECTED_LINK_COLOR;    //选中点、边（红色）\n            default: return \"#000000\";\n        }\n    }\n\n    checkLink(link, name1, name2){\n        let node1 = link.node1;\n        let node2 = link.node2;\n        if( (node1.name===name1 && node2.name===name2) || (node1.name===name2 && node2.name===name1) ){\n            return true;\n        }\n        return false;\n    }\n\n    //重置link颜色\n    resetColor(){\n        let links = this.props.link;\n        links.forEach(link=>{\n            if(link.polyline.isVisible())\n                link.polyline.setStrokeColor(this.DEFAULT_LINK_COLOR); \n        });\n        this.props.updateState(null, links);\n    }\n\n    /*获取元素的横坐标*/\n    getLeft(e){\n        var offset=e.offsetLeft;\n        if(e.offsetParent!=null){\n        offset+=this.getLeft(e.offsetParent);\n        } \n        return offset;\n    } \n\n    //设置起点终点\n    setSE(event){\n        event.preventDefault();\n        event.stopPropagation();\n        let that = this;\n        let name = event.target.attributes.id.value.split(\"_\").pop();\n\t\t/*\n\t\tlet menu = new nw.Menu();\n\t\tmenu.append(new nw.MenuItem({\n\t\t\tlabel: '设为起点',\n\t\t\tclick: function(){\n                that.setState({start: name});\n\t\t\t}\n\t\t}));\n\t\tmenu.append(new nw.MenuItem({\n\t\t\tlabel: '设为终点',\n\t\t\tclick: function(){\n                that.setState({end: name});\n\t\t\t}\n\t\t}));\n\t\tmenu.popup(event.clientX, event.clientY);*/\n\t\tlet menu = new MyMenu(\"MyMenu_Node_SVG\");\n\t\tmenu.append([{\n\t\t\tlabel: '设为起点',\n\t\t\tclick: function(){\n                that.setState({start: name});\n\t\t\t}\n        },{\n\t\t\tlabel: '设为终点',\n\t\t\tclick: function(){\n                that.setState({end: name});\n\t\t\t}\n        }]);\n        menu.popup(event.clientX, event.clientY);\n\t\t\n\t\treturn false;\n    }\n\n    //提问\n    ask(que, msg,type,actionID){             //msg是标准答案(转换后的)\n        clearTimeout(window.timer);\n        let that = this;\n        window.layer.prompt({title: que}, function(text, index){\n            layer.closeAll();\n            var visitID=-1;\n            //答对答错都要保存结果(不是重绘的时候才保存！！！)\n           if(!window.repaint)              \n           {\n            $.ajax({                      //需要先从动作表获得最大visitID(因为可能取消了问题而不保存在que表中)\n                type:\"GET\",\n                url:'http://localhost:3001/getVisitID',\n                //url:\"/collect\",\n                data:{},\n                success: function(json){\n                    visitID=parseInt(json.visitID);\n                    $.ajax({                            //ajax是异步的，为了保持同步，保存题目需要写在查询visitID的回调函数中\n                        type:\"POST\",\n                        url:'http://localhost:3001/collectQue',\n                        //url:\"/collect\",\n                        data:{que:que,ans:text,msg:msg,type:type,visitID:visitID,actionID:actionID},\n                        success: function(json){\n                        },\n                        error: function(){\n                        }\n                    });\n                },\n                error: function(){\n                }\n            });\n           }\n            if(text!=msg){\n                window.layer.msg('正确答案：'+msg, {time: 1000});\n                setTimeout(()=>{\n                    that.animate();\n                }, 1100);\n            }else{\n                window.layer.msg('答对了！', {time: 1000});\n                that.animate();\n            }\n        } );\n    }\n\n  \n\n   //**************************************************** by cdz\n    //执行动作：根据STEP_COUNT执行！！！\n    //注意：当Question、showHelp、showCode时，之所以return是为了结束当前函数，不再执行当前函数末尾的animate\n    //因为在else if中会使用layer，内部接着使用了setTimeout和animate继续下去\n\n\n   //倒退:为了减少不必要的理解错误，只能倒退到点和边初始化完成以后\n   animate_back(){\n    //不管处于什么状态，都使其暂停\n    this.setState({play: \"pause\"});\n    clearTimeout(window.timer);\n    layer.closeAll();\n   \n\n    STEP_COUNT--;\n    let back_step = this.getStep(STEP_COUNT);              //获取上一帧的信息\n    if(back_step===null){\n        this.stop();\n        return;\n    }\n\n    let links = this.props.link;                          //将要更新的元素\n    let S_NODE = this.state.S_NODE;\n    let S_EDGE=this.state.S_EDGE;\n    let S_NODE_DIS=this.state.S_NODE_DIS;\n    let S_NODE_INFO=this.state.S_NODE_INFO;\n\n    for(var i=0;i<back_step.types.length;i++){           //扫描一帧的内容\n        console.log(back_step.infos[i])\n        if(back_step.types[i]===\"changeEdgeColor\"){\n            let params = back_step.infos[i][1].split(\"(\")[1].split(\",\");\n            params.pop();\n            //let color =back_step.infos[i][1].split(\"RGB\")[1];\n            let color = this.INITIAL_LINK_COLOR;                //状态返回，即后退\n            \n            //改变边的颜色\n            let name1 = _name[parseInt(params[0])];\n            let name2 = _name[parseInt(params[1])];\n            links.forEach(link=>{\n                if(link.polyline.isVisible()){\n                    if((link.node1.name===name1&&link.node2.name===name2)||(link.node1.name===name2&&link.node2.name===name1)){\n                        link.polyline.setStrokeColor(color);\n                    }\n                }\n             });\n                //this.props.updateState(null, links);\n            }\n        else if(back_step.types[i]===\"changeNodeColor\"){\n            let idx = back_step.infos[i][1].split(\"(\")[1].split(\",\")[0];\n            idx = parseInt(idx);\n            //let color = back_step.infos[i][1].split(\"RGB\")[1];\n            let color = this.INITIAL_NODE_COLOR;\n            let name = _name[idx];  //找到编号对应的点名\n            S_NODE.set(name,color);  //S_NODE是键值对，改变name对应点的状态\n            //this.setState({S_NODE});\n            }\n\n        else if(back_step.types[i]===\"changeEdgeLength\"){\n            //\"20\tchangeEdgeLength(0,1,1173)\tAnimation\t2\";\n            var params=back_step.infos[i][1].split('(')[1].split(')')[0].split(','); //获取点编号、边距离\n            let name1 = _name[parseInt(params[0])];  //起点编号\n            let name2 = _name[parseInt(params[1])];　\n            let dis=parseFloat(params[2]);\n             S_EDGE.set(dis,[name1,name2]); \n        }\n         else if(back_step.types[i]===\"changeNodeDist\"){\n            var params=back_step.infos[i][1].split('(')[1].split(')')[0].split(',');\n            let idx=parseInt(params[0]);  //点的编号\n            let distance=parseFloat(params[1]);\n            let name=_name[idx];   //点名\n            S_NODE_DIS.set(name,distance);\n        }\n        else if(back_step.types[i]===\"showCode\"){\n            var that=this;\n            var param=back_step.infos[i][1].split('(')[1].split(')')[0];\n            var codeName=\"code\"+param+\".txt\";\n            $.ajax({\n                    type:\"POST\",\n                    url:\"http://localhost:3001/code\",\n                    //url:\"/code\",\n                    data:{codeName:codeName},\n                    success: function(code){\n                    that.codeChangeHandler(code);   //不能用this，因为ajax中的this已经不在代表外面的组件了!!!???\n                    },\n                    error: function(){\n                        console.log('获取代码失败！');\n                    }\n            });\n        }\n        else if(back_step.types[i]===\"showHelp\"){\n            let msg =back_step.infos[i][1].split(\"(\")[1].split(\")\")[0];\n            layer.msg(msg, {time: this.state.speed *3000000 +70});  //无限停留\n        }\n        else if(back_step.types[i]===\"Question\" && window.question){\n            let que = back_step.infos[i][2];\n             let ans = back_step.infos[i][3];\n             if(ans[0]===\"*\"){\n                 ans = ans.replace(/\\*/g, \"\");\n                 ans = _name[ans];\n             }\n            return this.ask(que, ans);   \n        }\n         else if(back_step.types[i]===\"showInequality\"){\n            var params=back_step.infos[i][1].split('(')[1].split(')')[0].split(',');\n            let idx=parseInt(params[0]);  //点的编号\n            let info=params[1];\n            let name=_name[idx];   //点名\n            S_NODE_INFO.set(name,info);\n         }\n         else if(back_step.types[i]===\"InequalityDisapper\"){\n            var params=back_step.infos[i][1].split('(')[1].split(')')[0].split(',');\n            let idx=parseInt(params[0]);  //点的编号\n            let info='';  //将信息（不等式）置空\n            let name=_name[idx];   //点名\n            S_NODE_INFO.set(name,info);\n        }\n            \n    }\n    //对一帧中的各元素统一进行刷新\n    this.props.updateState(null, links);\n    //this.setState({S_NODE});\n    //this.setState({S_EDGE});\n    //this.setState({S_NODE_DIS});\n    //this.setState({S_NODE_INFO});\n    this.setState({S_NODE,S_EDGE,S_NODE_DIS,S_NODE_INFO});\n}\n\n    \n   //前进\n   animate_forward(){\n        //不管处于什么状态，都使其暂停\n    this.setState({play: \"pause\"});\n    clearTimeout(window.timer);\n    layer.closeAll();\n\n    STEP_COUNT++;\n    let forward_step = this.getStep(STEP_COUNT);\n    if(forward_step===null){\n        this.stop();\n        return;\n    }\n\n    let links = this.props.link;  //将要更新的元素\n    let S_NODE = this.state.S_NODE;\n    let S_EDGE=this.state.S_EDGE;\n    let S_NODE_DIS=this.state.S_NODE_DIS;\n    let S_NODE_INFO=this.state.S_NODE_INFO;\n\n    for(var i=0;i<forward_step.types.length;i++){\n        if(forward_step.types[i]===\"changeEdgeColor\"){\n            let params = forward_step.infos[i][1].split(\"(\")[1].split(\",\");\n            params.pop();\n            let color =forward_step.infos[i][1].split(\"RGB\")[1];\n            color = this.chooseColor(color);\n            \n            //改变边的颜色\n            let name1 = _name[parseInt(params[0])];\n            let name2 = _name[parseInt(params[1])];\n            links.forEach(link=>{\n                if(link.polyline.isVisible()){\n                    if((link.node1.name===name1&&link.node2.name===name2)||(link.node1.name===name2&&link.node2.name===name1)){\n                        link.polyline.setStrokeColor(color);\n                    }\n                }\n             });\n                //this.props.updateState(null, links);\n            }\n        else if(forward_step.types[i]===\"changeNodeColor\"){\n            let idx = forward_step.infos[i][1].split(\"(\")[1].split(\",\")[0];\n            idx = parseInt(idx);\n            let color =forward_step.infos[i][1].split(\"RGB\")[1];\n            color = this.chooseColor(color);\n            let name = _name[idx];  //找到编号对应的点名\n            S_NODE.set(name,color);  //S_NODE是键值对，改变name对应点的状态\n            //this.setState({S_NODE});\n            }\n        else if(forward_step.types[i]===\"changeEdgeLength\"){\n            //\"20\tchangeEdgeLength(0,1,1173)\tAnimation\t2\";\n            var params=forward_step.infos[i][1].split('(')[1].split(')')[0].split(','); //获取点编号、边距离\n            let name1 = _name[parseInt(params[0])];  //起点编号\n            let name2 = _name[parseInt(params[1])];　\n            let dis=parseFloat(params[2]);\n             S_EDGE.set(dis,[name1,name2]); \n        }\n         else if(forward_step.types[i]===\"changeNodeDist\"){\n            var params=forward_step.infos[i][1].split('(')[1].split(')')[0].split(',');\n            let idx=parseInt(params[0]);  //点的编号\n            let distance=parseFloat(params[1]);\n            let name=_name[idx];   //点名\n            S_NODE_DIS.set(name,distance);\n        }\n        else if(forward_step.types[i]===\"showCode\"){\n            var that=this;\n            var param=forward_step.infos[i][1].split('(')[1].split(')')[0];\n            var codeName=\"code\"+param+\".txt\";\n            $.ajax({\n                    type:\"POST\",\n                    url:\"http://localhost:3001/code\",\n                    //url:\"/code\",\n                    data:{codeName:codeName},\n                    success: function(code){\n                    that.codeChangeHandler(code);   //不能用this，因为ajax中的this已经不在代表外面的组件了!!!???\n                    },\n                    error: function(){\n                        console.log('获取代码失败！');\n                    }\n            });\n        }\n        else if(forward_step.types[i]===\"showHelp\"){\n            let msg =forward_step.infos[i][1].split(\"(\")[1].split(\")\")[0];\n            layer.msg(msg, {time: this.state.speed *300000 +70});  //无限停留\n        }\n        else if(forward_step.types[i]===\"Question\" && window.question){\n            let que = forward_step.infos[i][2];\n             let ans = forward_step.infos[i][3];\n             if(ans[0]===\"*\"){\n                 ans = ans.replace(/\\*/g, \"\");\n                 ans = _name[ans];\n             }\n            return this.ask(que, ans);   \n        }\n         else if(forward_step.types[i]===\"showInequality\"){\n            var params=forward_step.infos[i][1].split('(')[1].split(')')[0].split(',');\n            let idx=parseInt(params[0]);  //点的编号\n            let info=params[1];\n            let name=_name[idx];   //点名\n            S_NODE_INFO.set(name,info);\n         }\n         else if(forward_step.types[i]===\"InequalityDisapper\"){\n            var params=forward_step.infos[i][1].split('(')[1].split(')')[0].split(',');\n            let idx=parseInt(params[0]);  //点的编号\n            let info='';  //将信息（不等式）置空\n            let name=_name[idx];   //点名\n            S_NODE_INFO.set(name,info);\n        }\n            \n    }\n    //对一帧中的各元素统一进行刷新\n    this.props.updateState(null, links);\n    //this.setState({S_NODE});\n    //this.setState({S_EDGE});\n    //this.setState({S_NODE_DIS});\n    //this.setState({S_NODE_INFO});\n    this.setState({S_NODE,S_EDGE,S_NODE_DIS,S_NODE_INFO});\n\n\n}\n\n}\n\n\nclass Node extends React.Component{\n    constructor(props){\n        super(props);\n        this.SELECT_COLOR = \"#300\";\n        this.DEFAULT_COLOR = \"#3C9\";\n    }\n\n    //<g>元素通常用来对相关图形元素进行分组\n    //onContextMenu：对应右击鼠标的响应事件\n    render(){\n        return (\n            <g id={\"node_\"+this.props.name} onContextMenu={this.props.setSE}>\n                <circle id={\"node_circle_\"+this.props.name} cx={this.props.x} cy={this.props.y} r={this.props.r || 20} fill={this.props.color ||　this.DEFAULT_COLOR}></circle>\n                <text id={\"node_text_\"+this.props.name} x={this.props.x} y={this.props.y} fill=\"black\" textAnchor=\"middle\" dominantBaseline=\"middle\" style={{fontSize: \"13px\"}}>{this.props.hide || this.props.name}</text>\n                <text id={\"node_value\"+this.props.name} x={this.props.x} y={this.props.y+10} fill=\"black\" textAnchor=\"middle\" dominantBaseline=\"middle\" fontSize='13px' fill='blue'>{this.props.distance}</text>\n                <text id={\"node_value\"+this.props.name} x={this.props.x+40} y={this.props.y-5} fill=\"black\" textAnchor=\"middle\" dominantBaseline=\"middle\" fontSize='13px' fill='black'>{this.props.info}</text>\n            </g>\n        );\n    }\n    hover(event){\n        console.log(event.target.attributes.fill);\n        console.log(event.target.attributes);\n        let attributes = event.target.attributes;\n    }\n}\n\nclass Link extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.SELECT_COLOR = \"#900\";\n        this.DEFAULT_COLOR = this.props.color;\n    }\n    render(){\n        this.DEFAULT_COLOR = this.props.color;\n         return (\n            <g id={\"link_\"+this.props.from+\"_\"+this.props.to}>\n                 <line x1={this.props.x1} y1={this.props.y1} x2={this.props.x2} y2={this.props.y2} stroke={this.props.color} strokeWidth=\"5\" style={{cursor: \"pointer\"}} onMouseEnter={this.hover.bind(this)} onMouseLeave={this.hover.bind(this)}/>\n                 <text x={(this.props.x1+this.props.x2)/2} y={(this.props.y1+this.props.y2)/2}  style={{fontSize:\"15px\"}}>{this.props.distance}</text>\n             </g>\n        );\n    }\n    hover(event){\n        let attributes = event.target.attributes;\n        attributes.stroke.value===this.SELECT_COLOR ? attributes.stroke.value=this.DEFAULT_COLOR : attributes.stroke.value=this.SELECT_COLOR;\n    }\n}\n\nexport default GraphSVG;","\nlet $=window.jQuery;\nlet sleep=require('sleep')\n\n/*function sleep(d){                                  //暴力暂停\n    for(var t = Date.now();Date.now() - t <= d;);\n}*/\n\n\n//const cities=[\"成都\",\"广州\",\"上海\",\"大连\"];\n//const start=\"成都市\";\n//const end=\"上海\";\nlet cities=[];\nlet start;\nlet unvisiableEdgeIdx=[];\n\nfunction unVisiEdge(edgeIdx,index)　　　　　　　　　　//删除边\n{\n    setTimeout(()=>{\n        $(\"#link_\"+edgeIdx).click();\n        if(index==unvisiableEdgeIdx.length)\n            window.layer.closeAll();\n    },1000*index); \n}\n\n\nfunction addCity(val,index,length)                  //添加结点并渲染边\n{\n    //搜索地点\n    setTimeout(()=>{\n        $(\"#input\").val(val);\n    },3000*index-2800);\n    \n    setTimeout(()=>{\n        $('#searchOK').click();\n    },3000*index-2000);\n\n    //添加\n    setTimeout(()=>{\n        let addCityBtn=$(\"#addCity\");\n        if(addCityBtn.length>0){                 //添加按钮加载完成后再点击\n            addCityBtn.click();\n        }\n        else{  \n             alert(\"尚未加载添加城市的组件\");\n        }\n\n        if(index==length){\n            $(\"#confirmBtn\").click();\n            /*setTimeout(()=>{                               //尝试自动触发右击事件选择起点，但是都不行!　=>　只好采用手动点击\n                /*$(\"#sidebar\").trigger(\"contextmenu\");\n                $('#node_成都市').trigger({\n                    type: 'mouseup',\n                    which: 3\n                });\n                alert(\"点击了\");\n            },25000);*/\n            //setTimeout(()=>{document.getElementById(\"node_成都市\").contextmenu()},25000);\n            //$(\"#node_成都市\").mousedown();\n            //window.layer.closeAll();\n            /*$(document).ready(()=>{\n                $(\"#node_成都市\").contextmenu();\n                alert(\"执行了右击\");\n            });*/\n            window.layer.msg(\"加载完成后，右键选择起点：\"+start,{time:300000});\n            setTimeout(()=>{                                                 //删除部分边\n                window.layer.load(1, {shade: [0.2,'#fff']});\n                $(\"#edge\").click();\n                unvisiableEdgeIdx.map((edgeIdx,index)=>{\n                    unVisiEdge(edgeIdx,index+1);\n                });\n            },25000);\n        }\n           \n    }\n    ,3000*index-800);  \n}\n\nexport function Repaint()\n{\n    /*cities.map((val,index)=>{\n        $(\"#input\").val(val);\n        //alert(val);\n        $('#searchOK').click();\n        setTimeout(()=>{\n            let addCityBtn=$(\"#addCity\");\n            if(addCityBtn.length>0){                 //添加按钮加载完成后再点击\n                addCityBtn.click();\n            }\n             else{  \n                 alert(\"尚未加载添加城市的组件\");\n            }   \n        }\n        ,1000*index);  \n    });*/    //参考:https://blog.csdn.net/strdhgthbbh/article/details/92837282 \n\n\n   \n    $.ajax({                      //获取需要重绘的算法的信息:搜索的地点、起点、不可见的边\n        type:\"POST\",\n        url:'http://localhost:3001/getVisitInfo',\n        //url:\"/collect\",\n        data:{visitID:window.repaintVisitID},\n        success: function(json){\n            let visitInfo=json.VisitInfo;\n            //alert(visitInfo.placesName);\n            cities=visitInfo.placesName.split(\" \");\n            let startIdx=parseInt(visitInfo.seID);\n            start=cities[startIdx];\n            let idxtmp=visitInfo.unvisiableEdgeID.split(\" \");         //得到不可见边的编号\n            idxtmp.map((tmp,index)=>{\n                unvisiableEdgeIdx.push(parseInt(tmp));\n            });\n\n            //返回结果后，进入自动模拟\n            window.layer.load(1, {shade: [0.2,'#fff']});\n            $(\"#panel>.drawer\").click();\n            let length=cities.length;\n            cities.map((val,index)=>{\n                addCity(val,index+1,length);\n            });\n        },\n        error: function(){\n            alert(\"重绘时获取信息出错!\");\n        }\n    });\n    \n}\n\n\n","import GraphTable from \"./GraphTable.js\";\nimport GraphSVG from \"./GraphSVG.js\";\n\nlet React = require(\"react\");\nclass Panel extends React.Component{\n\n    //参考index.js知Panel的属性包括updataState、node、link\n    //由render中...this.props知，这几个属性还会传递给GraphSVG   GraphTable\n    constructor(props){\n        super(props);\n        \n        this.MARGIN_RIGHT = 600;\n        this.LEFT = 10;\n\n        this.state = {\n            left: -this.LEFT,\n            marginRight: -this.MARGIN_RIGHT\n        };\n    }\n\n    \n    //注：　...this.props，props提供的语法糖，可以将父组件中的所有属性复制给子组件\n    render(){\n        return (\n            <div id=\"panel\" style={{marginRight: this.state.marginRight+\"px\"}}>\n                <div id=\"graph\"> \n                    <GraphSVG {...this.props}/>\n                </div>  \n                <div id=\"table\">\n                    <GraphTable {...this.props}/>\n                </div>\n                <div className=\"drawer\" style={{left: this.state.left+\"px\"}} onClick={this.close.bind(this)}></div>\n            </div>\n        );\n    }\n    //关闭右栏\n    close(){\n        if(this.state.left!==0){\n            this.setState({\n                left: 0,\n                marginRight: 0\n            });\n        }else{\n            this.setState({\n                left: -this.LEFT,\n                marginRight: -this.MARGIN_RIGHT\n            });\n        }\n    }\n}\n\nexport default Panel;","//引入三个组件  \nimport Map from \"../component/Map.js\";   \nimport Sidebar from \"../component/Sidebar.js\";\nimport Panel from \"../component/Panel.js\";\n\nimport {Repaint}  from \"../SimulateClickEvent\" \n\n//引入jQuery  (换到了html中引入)\n//let $ = require(\"jquery\");\n//window.$ = $;\n//window.jQuery = $;\n\n//引入自定义样式\nrequire(\"../../css/map.new.css\");\n//引入layer.js\n//require(\"./app/layer/skin/default/layer.css\");\n//let layer = require(\"./app/layer/layer.js\");\n//window.layer = layer;\nlet React = require(\"react\");                     //引入React \n\n\nclass MainInterface extends React.Component{\n    constructor(props){\n        super(props);       \n        //alert(this.props.location.state.visitID);\n        this.state = {\n            node: [],\n            link: []\n        };\n    }\n\n    render(){\n        return (\n            <div id=\"container\">\n                <Sidebar updateState={this.updateState.bind(this)} node={this.state.node} link={this.state.link}/>\n                <Map updateState={this.updateState.bind(this)} node={this.state.node} link={this.state.link}/>\n                <Panel updateState={this.updateState.bind(this)} node={this.state.node} link={this.state.link}/>\n            </div>\n        );\n    }\n\n    componentDidMount()\n    { \n        //alert(window.repaint);\n        if(window.repaint)\n        {\n            Repaint();\n        }\n       \n    \n    }\n\n    /**\n     * 更新node和link的回调函数\n     * @param {*} node \n     * @param {*} link \n     */\n    updateState(node, link){\n        let oldNode = this.state.node;\n        let oldLink = this.state.link;\n        this.setState({\n            node: node || oldNode,  //当结果为真时，返回第一个为真的值\n            link: link || oldLink\n        });\n    }\n}\n\nexport default MainInterface;\n","import eventProxy from \"../eventProxy.js\"\nimport {Link} from 'react-router-dom';\nlet React = require(\"react\");\n//const $=window. window.jQuery;  \n//const jsdom = require('jsdom');          \n//const { JSDOM } = jsdom;\n//const { document } = (new JSDOM('<!doctype html><html><body></body></html>')).window;\n//global.document = document;\n//global.window = document.defaultView;\n//const $ = require('jquery')(window);\nconst $=window. window.jQuery;              //node.js添加jquery失败了，改为在index.html中cdn引入\n\nlet actions;\n\nclass BodyInfo extends React.Component{\n    constructor(props){\n        super(props);\n        this.state={\n            content:\"action\"    \n        };   //默认显示动作表\n        this.onSelectChange=this.onSelectChange.bind(this);  //如果你不绑定方法，那么在事件发生并且精确调用这个方法时，方法内部的this会丢失指向。\n    }\n\n    render()\n    {\n        let content=this.setContent();\n        return(\n            <div id=\"bodyArea\">\n              {content}\n            </div>\n        );\n    }\n\n    onSelectChange(contentType){  \n        this.setState({content:contentType});\n    }\n\n    componentDidMount(){                             //挂载时开始监听\n        eventProxy.on(window.contentType,this.onSelectChange);  \n    }\n\n    setContent(){\n        switch(this.state.content){\n            case \"action\":\n                return this.renderAction();\n                break;\n            case \"que\":\n                return this.renderQue();\n                break;\n        }\n        return \"ERROR\";\n    }\n\n    //显示访问记录（每一次的动作只显示一栏!!!!，展开之后才显示详细动作）\n    renderAction(){\n        //let actions;\n        $.ajax({\n            url:\"http://localhost:3001/actions\",\n            type:'GET',\n            data:{},\n            async:false,                         //同步！！\n            success:function(json){\n                actions=json.actions;\n                //alert(actions[0].visitID);\n            },\n            error:function(){\n                alert('获取访问记录信息失败!');\n            }\n        });\n       \n\n        let tableContent=actions.map((action,index)=>{\n            return(\n                <tr key={index} id={'visit'+index}>\n                    <td align=\"center\">{action.visitID}</td>\n                    <td align=\"center\">{action.algorithm}</td>\n                    <td align=\"center\"><ButtonSpread visitID={action.visitID} trID={'visit'+index}/></td>\n                    <td align=\"center\"><ButtonRenew visitID={action.visitID}/></td>\n                </tr>\n            )\n        });\n\n        return(\n            <table id=\"mtable\" border=\"1\">\n            <thead>\n                <tr>\n                    <th>访问序号</th>\n                    <th>算法</th>\n                    <th>展开/收起</th>\n                    <th>场景再现</th>\n                </tr>\n            </thead>\n           \n            <tbody>\n                {tableContent}\n            </tbody>\n                \n            </table>\n        );\n    }\n\n\n    renderQue(){\n        let ques;\n        $.ajax({\n            url:\"http://localhost:3001/getQues\",\n            type:'GET',\n            data:{},\n            async:false,                         //同步！！\n            success:function(json){\n                ques=json.ques;\n            },\n            error:function(){\n                alert('获取访问记录信息失败!');\n            }\n        });\n\n        let quesContent=ques.map((que,index)=>{\n            var judge=\"正确\";\n            if(que.msg!=que.ans)\n                judge=\"错误\";\n            return(\n                <tr key={index}>\n                    <td>{que.id}</td>\n                    <td>{que.type}</td>\n                    <td>{que.que}</td>\n                    <td>{que.msg}</td>\n                    <td>{que.ans}</td>\n                    <td>{judge}</td>\n                    <td>{que.visitID}</td>\n                    <td><ButtonRenew visitID={que.visitID}/></td>\n                </tr>\n            );\n        });\n\n        return(\n            <table id=\"mtable\" border=\"1\">\n                <thead>\n                    <tr>\n                        <th>序号</th>\n                        <th>类型</th>\n                        <th>问题</th>\n                        <th>回答</th>\n                        <th>答案</th>\n                        <th>正误</th>\n                        <th>访问号</th>\n                        <th>情景再现</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {quesContent}\n                </tbody>\n            </table>\n        );\n    }\n}\n\n\n//点击这个按钮展开动作表\nclass ButtonSpread extends React.Component{\n     //需要有一个属性：visitID,用于查询动作信息\n     //需要有一个属性:trID,即该行表格的id，用于在该表格后面添加展开的表格\n    constructor(props){  \n        super(props);\n        this.state={\n            isQueryed:false,                  //是否已经查询数据库\n            isSpreaded:false,                 //是否已经展开\n        }\n    }\n\n    render(){\n        let text=\"展开\";\n        if(this.state.isSpreaded)\n            text=\"收起\";\n        return(\n            <button onClick={this.onClickButton.bind(this)}>{text}</button>\n        );\n    }\n\n    onClickButton(){\n        if(this.state.isQueryed)         //如果已经查询过数据库，直接显示内容\n        {\n            if(this.state.isSpreaded) //如果已经展开，直接隐藏\n            {\n                $('#table'+this.props.visitID).hide();\n                this.setState({isSpreaded:false});\n            }\n            else{                    //尚未展开，显示内容\n                $('#table'+this.props.visitID).show();\n                this.setState({isSpreaded:true});\n            }\n        }\n        else             //尚未查询数据库，查询数据并添加内容\n        {\n            let visitID=this.props.visitID;\n            let actionDetails;\n            $.ajax({\n                url:'http://localhost:3001/actionDetails',\n                type:'POST',\n                data:{visitID},\n                async:false,\n                success:function(json){\n                    actionDetails=json.actionDetails;\n                },\n                error:function(){\n                    alert(\"获取动作表信息失败!\");\n                }\n            });\n            //alert(actionDetails[0].content);\n            let addTableHead=\"<thead><tr>  <th>动作号</th> <th>内容</th> <th>动作类型</th> <th>帧号</th>  </tr></thead>\";\n            let addTableBodyContent='';\n            actionDetails.map((action,index)=>{\n                let line=\"<tr key=\"+index+\">\";\n                line+=\"<td>\"+action.actionID+\"</td>\";\n                line+=\"<td>\"+action.content+\"</td>\";\n                line+=\"<td>\"+action.type+\"</td>\";\n                line+=\"<td>\"+action.stepID+\"</td>\";\n                line+=\"</tr>\";\n               addTableBodyContent+=line;\n            });\n            let addTableBody='<tbody>'+addTableBodyContent+'</tbody>';\n            let addTable='<table id=table'+this.props.visitID+' border=1>'+addTableHead+addTableBody+'</table>';\n            $('#'+this.props.trID).after(addTable);\n            this.setState({isQueryed:true});\n            this.setState({isSpreaded:true});\n        }\n    }\n\n\n}\n\n\n//点击按钮跳回算法演示界面\nclass ButtonRenew extends React.Component{\n    constructor(props)\n    {\n        super(props);\n        //this.props.visitID, 含有这个属性，用于传递访问编号，页面跳转后读取数据库，演示动作\n    }\n\n    render(){\n        //let visitID=this.props.visitID;\n        return(\n            //<Link to={{pathname:'/',state:{panelState:'open',visitID:visitID}}}><button  onClick={this.onBtnClick.bind(this)}>进入</button></Link>\n            <Link to={{pathname:'/'}}><button  onClick={this.onBtnClick.bind(this)}>进入</button></Link>\n        );\n    }\n\n    onBtnClick()\n    {\n        window.repaintVisitID=this.props.visitID;            //用于重绘时读取搜索记录\n        window.repaint=true;\n    }\n}\n\nexport default BodyInfo;","import eventProxy from \"../eventProxy.js\";\nimport {Link} from 'react-router-dom';\nlet React = require(\"react\");\nconst $=window.jQuery;  \n\n\nclass HeadInfo extends React.Component{\n\n    render(){\n        let username=window.username;\n        return(\n            <div id=\"headArea\">\n                <div id=\"userInfo\">\n                    <label className=\"infoBar\">用户名:</label>\n                    <label className='infoBar'>{username}</label>\n                    <br/>\n                    <label className=\"infoBar\">时间:</label>\n                    <Clock />\n                    <br/>\n                    <label className=\"infoBar\">内容：</label>\n                    <select id=\"contentType\" onChange={this.onSelectChange.bind(this)}>\n                        <option value =\"action\">动作</option>\n                        <option value =\"que\">问题</option>\n                    </select>\n                    <br/>\n                    <Link className=\"infoBar\" to={{pathname:'/',state:{panel:'open'}}}><button id=\"retButton\">返回主界面</button></Link>\n                </div>\n            </div>\n        );\n    }\n\n    onSelectChange(){\n        let contentType=$('#contentType option:selected').val();\n        this.selectChangeHandler(contentType);\n    }\n    //组件间通信，发送消息告知选择的类型\n    selectChangeHandler(contentType){\n        eventProxy.trigger(window.contentType,contentType);\n    }\n}\n\n\nclass Clock extends React.Component{\n    constructor(props){\n        super(props);\n        this.state={data:new Date()};\n    }\n\n    componentDidMount(){        //挂载时设置定时器\n        this.timerID=setInterval(\n            ()=>this.tick(),\n            1000\n        );\n    }\n\n    componentWillUnmount(){    //卸载\n        clearInterval(this.timerID);\n    }\n\n    //通过更新状态进行计时\n    tick(){\n        this.setState({\n            data:new Date()\n        });\n    }\n\n    render(){\n        return(\n                <label className=\"infoBar\">{this.state.data.toLocaleTimeString()}</label>\n        );\n    }\n}\n\n\n\n\nexport default HeadInfo;","import React from 'react';\nimport HeadInfo from '../reports-component/HeadInfo.js'\nimport BodyInfo from '../reports-component/BodyInfo.js'\nrequire(\"../../css/map.new.css\");\nconst $=window.jQuery;  \n\nwindow.contentType=\"action\";\n\nclass Reports extends React.Component{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div id=\"reportsContainer\">\n        <HeadInfo />\n        <BodyInfo />\n      </div>\n     \n    );\n  }\n\n\n  \n}\n\nexport default Reports;","import {BrowserRouter,Switch,Route,Link} from 'react-router-dom';\nimport MainInterface from './MainInterface';\nimport Reports from './Reports';\nlet React=require('react');\n\n\n//加括号的函数体返回对象字面表达式\nconst MyRoute=()=>(  \n    <BrowserRouter>\n        <Switch>\n            <Route exact path=\"/\" component={MainInterface}/>\n            <Route exact path=\"/reports\" component={Reports}/>\n        </Switch>\n    </BrowserRouter>\n);   \n\n\n\n\nexport default MyRoute;\n\n","import MyRoute from './app/routes/MyRoute';\n\n//引入React\nlet React = require(\"react\");\nlet ReactDOM = require(\"react-dom\");\n\nwindow.showCode=\"showCode\";          //组件间消息传递的标志\nwindow.showAction=\"showAction\";\n\n\n\nReactDOM.render(<MyRoute />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n"],"sourceRoot":""}