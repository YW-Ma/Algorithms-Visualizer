{"ast":null,"code":"var $ = window.jQuery;\n\nvar sleep = require('sleep');\n/*function sleep(d){                                  //暴力暂停\n    for(var t = Date.now();Date.now() - t <= d;);\n}*/\n//const cities=[\"成都\",\"广州\",\"上海\",\"大连\"];\n//const start=\"成都市\";\n//const end=\"上海\";\n\n\nvar cities = [];\nvar start;\nvar unvisiableEdgeIdx = [];\n\nfunction unVisiEdge(edgeIdx, index) //删除边\n{\n  setTimeout(function () {\n    $(\"#link_\" + edgeIdx).click();\n    if (index == unvisiableEdgeIdx.length) window.layer.closeAll();\n  }, 1000 * index);\n}\n\nfunction addCity(val, index, length) //添加结点并渲染边\n{\n  //搜索地点\n  setTimeout(function () {\n    $(\"#input\").val(val);\n  }, 3000 * index - 2800);\n  setTimeout(function () {\n    $('#searchOK').click();\n  }, 3000 * index - 2000); //添加\n\n  setTimeout(function () {\n    var addCityBtn = $(\"#addCity\");\n\n    if (addCityBtn.length > 0) {\n      //添加按钮加载完成后再点击\n      addCityBtn.click();\n    } else {\n      alert(\"尚未加载添加城市的组件\");\n    }\n\n    if (index == length) {\n      $(\"#confirmBtn\").click();\n      /*setTimeout(()=>{                               //尝试自动触发右击事件选择起点，但是都不行!　=>　只好采用手动点击\n          /*$(\"#sidebar\").trigger(\"contextmenu\");\n          $('#node_成都市').trigger({\n              type: 'mouseup',\n              which: 3\n          });\n          alert(\"点击了\");\n      },25000);*/\n      //setTimeout(()=>{document.getElementById(\"node_成都市\").contextmenu()},25000);\n      //$(\"#node_成都市\").mousedown();\n      //window.layer.closeAll();\n\n      /*$(document).ready(()=>{\n          $(\"#node_成都市\").contextmenu();\n          alert(\"执行了右击\");\n      });*/\n\n      window.layer.msg(\"加载完成后，右键选择起点：\" + start, {\n        time: 30000\n      });\n      setTimeout(function () {\n        //删除部分边\n        window.layer.load(1, {\n          shade: [0.2, '#fff']\n        });\n        $(\"#edge\").click();\n        unvisiableEdgeIdx.map(function (edgeIdx, index) {\n          unVisiEdge(edgeIdx, index + 1);\n        });\n      }, 25000);\n    }\n  }, 3000 * index - 800);\n}\n\nexport function Repaint() {\n  /*cities.map((val,index)=>{\n      $(\"#input\").val(val);\n      //alert(val);\n      $('#searchOK').click();\n      setTimeout(()=>{\n          let addCityBtn=$(\"#addCity\");\n          if(addCityBtn.length>0){                 //添加按钮加载完成后再点击\n              addCityBtn.click();\n          }\n           else{  \n               alert(\"尚未加载添加城市的组件\");\n          }   \n      }\n      ,1000*index);  \n  });*/\n  //参考:https://blog.csdn.net/strdhgthbbh/article/details/92837282 \n  $.ajax({\n    //获取需要重绘的算法的信息:搜索的地点、起点、不可见的边\n    type: \"POST\",\n    url: 'http://localhost:3001/getVisitInfo',\n    //url:\"/collect\",\n    data: {\n      visitID: window.repaintVisitID\n    },\n    success: function success(json) {\n      var visitInfo = json.VisitInfo; //alert(visitInfo.placesName);\n\n      cities = visitInfo.placesName.split(\" \");\n      var startIdx = parseInt(visitInfo.seID);\n      start = cities[startIdx];\n      var idxtmp = visitInfo.unvisiableEdgeID.split(\" \"); //得到不可见边的编号\n\n      idxtmp.map(function (tmp, index) {\n        unvisiableEdgeIdx.push(parseInt(tmp));\n      }); //返回结果后，进入自动模拟\n\n      window.layer.load(1, {\n        shade: [0.2, '#fff']\n      });\n      $(\"#panel>.drawer\").click();\n      var length = cities.length;\n      cities.map(function (val, index) {\n        addCity(val, index + 1, length);\n      });\n    },\n    error: function error() {\n      alert(\"重绘时获取信息出错!\");\n    }\n  });\n}","map":{"version":3,"sources":["/home/cdz/Code/FrontEnd/algorithm-visualization-for-Mr-Huang/frontEnd/src/app/SimulateClickEvent.js"],"names":["$","window","jQuery","sleep","require","cities","start","unvisiableEdgeIdx","unVisiEdge","edgeIdx","index","setTimeout","click","length","layer","closeAll","addCity","val","addCityBtn","alert","msg","time","load","shade","map","Repaint","ajax","type","url","data","visitID","repaintVisitID","success","json","visitInfo","VisitInfo","placesName","split","startIdx","parseInt","seID","idxtmp","unvisiableEdgeID","tmp","push","error"],"mappings":"AACA,IAAIA,CAAC,GAACC,MAAM,CAACC,MAAb;;AACA,IAAIC,KAAK,GAACC,OAAO,CAAC,OAAD,CAAjB;AAEA;;;AAKA;AACA;AACA;;;AACA,IAAIC,MAAM,GAAC,EAAX;AACA,IAAIC,KAAJ;AACA,IAAIC,iBAAiB,GAAC,EAAtB;;AAEA,SAASC,UAAT,CAAoBC,OAApB,EAA4BC,KAA5B,EAA4C;AAC5C;AACIC,EAAAA,UAAU,CAAC,YAAI;AACXX,IAAAA,CAAC,CAAC,WAASS,OAAV,CAAD,CAAoBG,KAApB;AACA,QAAGF,KAAK,IAAEH,iBAAiB,CAACM,MAA5B,EACIZ,MAAM,CAACa,KAAP,CAAaC,QAAb;AACP,GAJS,EAIR,OAAKL,KAJG,CAAV;AAKH;;AAGD,SAASM,OAAT,CAAiBC,GAAjB,EAAqBP,KAArB,EAA2BG,MAA3B,EAAoD;AACpD;AACI;AACAF,EAAAA,UAAU,CAAC,YAAI;AACXX,IAAAA,CAAC,CAAC,QAAD,CAAD,CAAYiB,GAAZ,CAAgBA,GAAhB;AACH,GAFS,EAER,OAAKP,KAAL,GAAW,IAFH,CAAV;AAIAC,EAAAA,UAAU,CAAC,YAAI;AACXX,IAAAA,CAAC,CAAC,WAAD,CAAD,CAAeY,KAAf;AACH,GAFS,EAER,OAAKF,KAAL,GAAW,IAFH,CAAV,CANJ,CAUI;;AACAC,EAAAA,UAAU,CAAC,YAAI;AACX,QAAIO,UAAU,GAAClB,CAAC,CAAC,UAAD,CAAhB;;AACA,QAAGkB,UAAU,CAACL,MAAX,GAAkB,CAArB,EAAuB;AAAkB;AACrCK,MAAAA,UAAU,CAACN,KAAX;AACH,KAFD,MAGI;AACCO,MAAAA,KAAK,CAAC,aAAD,CAAL;AACJ;;AAED,QAAGT,KAAK,IAAEG,MAAV,EAAiB;AACbb,MAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBY,KAAjB;AACA;;;;;;;;AAQA;AACA;AACA;;AACA;;;;;AAIAX,MAAAA,MAAM,CAACa,KAAP,CAAaM,GAAb,CAAiB,kBAAgBd,KAAjC,EAAuC;AAACe,QAAAA,IAAI,EAAC;AAAN,OAAvC;AACAV,MAAAA,UAAU,CAAC,YAAI;AAAkD;AAC7DV,QAAAA,MAAM,CAACa,KAAP,CAAaQ,IAAb,CAAkB,CAAlB,EAAqB;AAACC,UAAAA,KAAK,EAAE,CAAC,GAAD,EAAK,MAAL;AAAR,SAArB;AACAvB,QAAAA,CAAC,CAAC,OAAD,CAAD,CAAWY,KAAX;AACAL,QAAAA,iBAAiB,CAACiB,GAAlB,CAAsB,UAACf,OAAD,EAASC,KAAT,EAAiB;AACnCF,UAAAA,UAAU,CAACC,OAAD,EAASC,KAAK,GAAC,CAAf,CAAV;AACH,SAFD;AAGH,OANS,EAMR,KANQ,CAAV;AAOH;AAEJ,GApCS,EAqCT,OAAKA,KAAL,GAAW,GArCF,CAAV;AAsCH;;AAED,OAAO,SAASe,OAAT,GACP;AACI;;;;;;;;;;;;;;;AAcS;AAITzB,EAAAA,CAAC,CAAC0B,IAAF,CAAO;AAAuB;AAC1BC,IAAAA,IAAI,EAAC,MADF;AAEHC,IAAAA,GAAG,EAAC,oCAFD;AAGH;AACAC,IAAAA,IAAI,EAAC;AAACC,MAAAA,OAAO,EAAC7B,MAAM,CAAC8B;AAAhB,KAJF;AAKHC,IAAAA,OAAO,EAAE,iBAASC,IAAT,EAAc;AACnB,UAAIC,SAAS,GAACD,IAAI,CAACE,SAAnB,CADmB,CAEnB;;AACA9B,MAAAA,MAAM,GAAC6B,SAAS,CAACE,UAAV,CAAqBC,KAArB,CAA2B,GAA3B,CAAP;AACA,UAAIC,QAAQ,GAACC,QAAQ,CAACL,SAAS,CAACM,IAAX,CAArB;AACAlC,MAAAA,KAAK,GAACD,MAAM,CAACiC,QAAD,CAAZ;AACA,UAAIG,MAAM,GAACP,SAAS,CAACQ,gBAAV,CAA2BL,KAA3B,CAAiC,GAAjC,CAAX,CANmB,CAMuC;;AAC1DI,MAAAA,MAAM,CAACjB,GAAP,CAAW,UAACmB,GAAD,EAAKjC,KAAL,EAAa;AACpBH,QAAAA,iBAAiB,CAACqC,IAAlB,CAAuBL,QAAQ,CAACI,GAAD,CAA/B;AACH,OAFD,EAPmB,CAWnB;;AACA1C,MAAAA,MAAM,CAACa,KAAP,CAAaQ,IAAb,CAAkB,CAAlB,EAAqB;AAACC,QAAAA,KAAK,EAAE,CAAC,GAAD,EAAK,MAAL;AAAR,OAArB;AACAvB,MAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBY,KAApB;AACA,UAAIC,MAAM,GAACR,MAAM,CAACQ,MAAlB;AACAR,MAAAA,MAAM,CAACmB,GAAP,CAAW,UAACP,GAAD,EAAKP,KAAL,EAAa;AACpBM,QAAAA,OAAO,CAACC,GAAD,EAAKP,KAAK,GAAC,CAAX,EAAaG,MAAb,CAAP;AACH,OAFD;AAGH,KAvBE;AAwBHgC,IAAAA,KAAK,EAAE,iBAAU;AACb1B,MAAAA,KAAK,CAAC,YAAD,CAAL;AACH;AA1BE,GAAP;AA6BH","sourcesContent":["\nlet $=window.jQuery;\nlet sleep=require('sleep')\n\n/*function sleep(d){                                  //暴力暂停\n    for(var t = Date.now();Date.now() - t <= d;);\n}*/\n\n\n//const cities=[\"成都\",\"广州\",\"上海\",\"大连\"];\n//const start=\"成都市\";\n//const end=\"上海\";\nlet cities=[];\nlet start;\nlet unvisiableEdgeIdx=[];\n\nfunction unVisiEdge(edgeIdx,index)　　　　　　　　　　//删除边\n{\n    setTimeout(()=>{\n        $(\"#link_\"+edgeIdx).click();\n        if(index==unvisiableEdgeIdx.length)\n            window.layer.closeAll();\n    },1000*index); \n}\n\n\nfunction addCity(val,index,length)                  //添加结点并渲染边\n{\n    //搜索地点\n    setTimeout(()=>{\n        $(\"#input\").val(val);\n    },3000*index-2800);\n    \n    setTimeout(()=>{\n        $('#searchOK').click();\n    },3000*index-2000);\n\n    //添加\n    setTimeout(()=>{\n        let addCityBtn=$(\"#addCity\");\n        if(addCityBtn.length>0){                 //添加按钮加载完成后再点击\n            addCityBtn.click();\n        }\n        else{  \n             alert(\"尚未加载添加城市的组件\");\n        }\n\n        if(index==length){\n            $(\"#confirmBtn\").click();\n            /*setTimeout(()=>{                               //尝试自动触发右击事件选择起点，但是都不行!　=>　只好采用手动点击\n                /*$(\"#sidebar\").trigger(\"contextmenu\");\n                $('#node_成都市').trigger({\n                    type: 'mouseup',\n                    which: 3\n                });\n                alert(\"点击了\");\n            },25000);*/\n            //setTimeout(()=>{document.getElementById(\"node_成都市\").contextmenu()},25000);\n            //$(\"#node_成都市\").mousedown();\n            //window.layer.closeAll();\n            /*$(document).ready(()=>{\n                $(\"#node_成都市\").contextmenu();\n                alert(\"执行了右击\");\n            });*/\n            window.layer.msg(\"加载完成后，右键选择起点：\"+start,{time:30000});\n            setTimeout(()=>{                                                 //删除部分边\n                window.layer.load(1, {shade: [0.2,'#fff']});\n                $(\"#edge\").click();\n                unvisiableEdgeIdx.map((edgeIdx,index)=>{\n                    unVisiEdge(edgeIdx,index+1);\n                });\n            },25000);\n        }\n           \n    }\n    ,3000*index-800);  \n}\n\nexport function Repaint()\n{\n    /*cities.map((val,index)=>{\n        $(\"#input\").val(val);\n        //alert(val);\n        $('#searchOK').click();\n        setTimeout(()=>{\n            let addCityBtn=$(\"#addCity\");\n            if(addCityBtn.length>0){                 //添加按钮加载完成后再点击\n                addCityBtn.click();\n            }\n             else{  \n                 alert(\"尚未加载添加城市的组件\");\n            }   \n        }\n        ,1000*index);  \n    });*/    //参考:https://blog.csdn.net/strdhgthbbh/article/details/92837282 \n\n\n   \n    $.ajax({                      //获取需要重绘的算法的信息:搜索的地点、起点、不可见的边\n        type:\"POST\",\n        url:'http://localhost:3001/getVisitInfo',\n        //url:\"/collect\",\n        data:{visitID:window.repaintVisitID},\n        success: function(json){\n            let visitInfo=json.VisitInfo;\n            //alert(visitInfo.placesName);\n            cities=visitInfo.placesName.split(\" \");\n            let startIdx=parseInt(visitInfo.seID);\n            start=cities[startIdx];\n            let idxtmp=visitInfo.unvisiableEdgeID.split(\" \");         //得到不可见边的编号\n            idxtmp.map((tmp,index)=>{\n                unvisiableEdgeIdx.push(parseInt(tmp));\n            });\n\n            //返回结果后，进入自动模拟\n            window.layer.load(1, {shade: [0.2,'#fff']});\n            $(\"#panel>.drawer\").click();\n            let length=cities.length;\n            cities.map((val,index)=>{\n                addCity(val,index+1,length);\n            });\n        },\n        error: function(){\n            alert(\"重绘时获取信息出错!\");\n        }\n    });\n    \n}\n\n\n"]},"metadata":{},"sourceType":"module"}