{"ast":null,"code":"import _classCallCheck from \"/home/morgan/Downloads/algorithm-visualization-for-Mr-Huang_6.23\\u4E0B\\u5348\\u5907\\u4EFD/algorithm-visualization-for-Mr-Huang/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/morgan/Downloads/algorithm-visualization-for-Mr-Huang_6.23\\u4E0B\\u5348\\u5907\\u4EFD/algorithm-visualization-for-Mr-Huang/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/morgan/Downloads/algorithm-visualization-for-Mr-Huang_6.23\\u4E0B\\u5348\\u5907\\u4EFD/algorithm-visualization-for-Mr-Huang/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/morgan/Downloads/algorithm-visualization-for-Mr-Huang_6.23\\u4E0B\\u5348\\u5907\\u4EFD/algorithm-visualization-for-Mr-Huang/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/morgan/Downloads/algorithm-visualization-for-Mr-Huang_6.23\\u4E0B\\u5348\\u5907\\u4EFD/algorithm-visualization-for-Mr-Huang/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/morgan/Downloads/algorithm-visualization-for-Mr-Huang_6.23\\u4E0B\\u5348\\u5907\\u4EFD/algorithm-visualization-for-Mr-Huang/frontEnd/src/app/component/Map.js\";\n\nvar React = require(\"react\");\n\nvar Map =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Map, _React$Component);\n\n  function Map() {\n    _classCallCheck(this, Map);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Map).apply(this, arguments));\n  }\n\n  _createClass(Map, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        id: \"map\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 6\n        },\n        __self: this\n      });\n    } //组件挂载后创建地图\n\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // 创建地图实例  \n      var BMap = window.BMap; //add by me（不知道为什么，学长那个不用添加全局变量，到这里却不行）\n\n      var map = new BMap.Map(\"map\");\n      window.map = map; //commented by me\n      // 创建点坐标  \n\n      var point = new BMap.Point(111.539334, 30.47691); // 初始化地图，设置中心点坐标和地图级别 \n\n      map.centerAndZoom(point, 5); //开启鼠标滚轮缩放\n\n      map.enableScrollWheelZoom(true);\n      map.addControl(new BMap.NavigationControl());\n      map.addControl(new BMap.ScaleControl());\n      map.addControl(new BMap.OverviewMapControl());\n      map.addControl(new BMap.MapTypeControl());\n      map.setCurrentCity(\"武汉\");\n      var localSearch = new BMap.LocalSearch(map, {\n        renderOptions: {\n          map: map,\n          panel: \"results\"\n        },\n        onInfoHtmlSet: this.onInfoHtmlSet.bind(this) //如何获得参数的??\n\n      });\n      window.localSearch = localSearch;\n    } //marker设置添加按钮\n\n  }, {\n    key: \"onInfoHtmlSet\",\n    value: function onInfoHtmlSet(poi, dom) {\n      var _this = this;\n\n      console.log(poi);\n      var title = poi.title;\n      var point = poi.point;\n      var node = dom.parentNode.parentNode;\n      var anchor = node.querySelector(\"a\");\n      if (anchor) anchor.remove();\n\n      var onClick = function onClick() {\n        _this.addNode(title, point);\n      };\n\n      if (node.querySelectorAll(\"button\").length <= 0) {\n        var btn = document.createElement(\"button\");\n        var str = document.createTextNode(\"添加\");\n        btn.className = \"add\";\n        btn.id = \"addCity\";\n        btn.appendChild(str);\n        btn.onclick = onClick;\n        node.appendChild(btn);\n        return;\n      }\n\n      node.querySelector(\"button\").onclick = onClick;\n    } //add mark point\n\n  }, {\n    key: \"addNode\",\n    value: function addNode(title, point) {\n      console.log(\"添加：\" + title + point);\n      var node = {\n        name: title,\n        lng: point.lng,\n        lat: point.lat\n      };\n      var nodes = this.props.node;\n      var index = nodes.findIndex(function (n) {\n        return n.name === node.name; //n就代表nodes\n      });\n\n      if (index < 0) {\n        //添加结点\n        nodes.push(node);\n        this.props.updateState(nodes);\n      }\n    }\n  }]);\n\n  return Map;\n}(React.Component);\n\nexport default Map;","map":{"version":3,"sources":["/home/morgan/Downloads/algorithm-visualization-for-Mr-Huang_6.23下午备份/algorithm-visualization-for-Mr-Huang/frontEnd/src/app/component/Map.js"],"names":["React","require","Map","BMap","window","map","point","Point","centerAndZoom","enableScrollWheelZoom","addControl","NavigationControl","ScaleControl","OverviewMapControl","MapTypeControl","setCurrentCity","localSearch","LocalSearch","renderOptions","panel","onInfoHtmlSet","bind","poi","dom","console","log","title","node","parentNode","anchor","querySelector","remove","onClick","addNode","querySelectorAll","length","btn","document","createElement","str","createTextNode","className","id","appendChild","onclick","name","lng","lat","nodes","props","index","findIndex","n","push","updateState","Component"],"mappings":"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","sourcesContent":["let React = require(\"react\");\n\nclass Map extends React.Component{\n    render(){\n        return (\n            <div id=\"map\">\n            </div>\n        );\n    }\n    //组件挂载后创建地图\n\tcomponentDidMount() {\n\t\t// 创建地图实例  \n\t\tvar BMap = window.BMap;    //add by me（不知道为什么，学长那个不用添加全局变量，到这里却不行）\n\t    let map = new BMap.Map(\"map\");\n\t\twindow.map = map;  //commented by me\n\t\t// 创建点坐标  \n\t\tlet point = new BMap.Point(111.539334, 30.47691);\n\t\t// 初始化地图，设置中心点坐标和地图级别 \n\t\tmap.centerAndZoom(point, 5);\n\t\t//开启鼠标滚轮缩放\n\t\tmap.enableScrollWheelZoom(true);\n\t\tmap.addControl(new BMap.NavigationControl());    \n\t\tmap.addControl(new BMap.ScaleControl());    \n\t\tmap.addControl(new BMap.OverviewMapControl());    \n\t\tmap.addControl(new BMap.MapTypeControl());    \n\t\tmap.setCurrentCity(\"武汉\");\n\t\tlet localSearch = new BMap.LocalSearch(map, {\n\t\t\trenderOptions: {map: map,panel: \"results\"},\n\t\t\tonInfoHtmlSet: this.onInfoHtmlSet.bind(this) //如何获得参数的??\n        }); \n        window.localSearch = localSearch;\n\t}\n\n\t//marker设置添加按钮\n\tonInfoHtmlSet(poi, dom){\n\t\tconsole.log(poi);\n\t\tlet title = poi.title;\n\t\tlet point = poi.point;\n\t\tlet node = dom.parentNode.parentNode;\n\t\tlet anchor = node.querySelector(\"a\");\n\t\tif(anchor)anchor.remove();\n\n\t\tlet onClick = ()=>{\n\t\t\tthis.addNode(title, point);\n\t\t}\n\n\t\tif(node.querySelectorAll(\"button\").length<=0){\n\t\t\tlet btn = document.createElement(\"button\");\n\t\t\tlet str = document.createTextNode(\"添加\");\n\t\t\tbtn.className = \"add\";\n\t\t\tbtn.id=\"addCity\";\n\t\t\tbtn.appendChild(str); \n\t\t\tbtn.onclick = onClick;\n\t\t\tnode.appendChild(btn);\n\t\t\treturn;\n\t\t}\n\t\tnode.querySelector(\"button\").onclick = onClick;\n\t}\n\t//add mark point\n\taddNode(title, point){\n        console.log(\"添加：\"+title+point);\n        let node = {\n            name: title,\n            lng: point.lng,\n            lat: point.lat\n        }\n        let nodes = this.props.node;\n        let index = nodes.findIndex(n=>{\n            return n.name === node.name;  //n就代表nodes\n        });\n        if(index<0){                      //添加结点\n            nodes.push(node);\n            this.props.updateState(nodes);\n        }\n\t}\n}\n\nexport default Map;"]},"metadata":{},"sourceType":"module"}